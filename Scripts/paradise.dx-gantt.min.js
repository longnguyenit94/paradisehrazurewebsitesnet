(function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define([],t):typeof exports=="object"?exports.Gantt=t():(n.DevExpress=n.DevExpress||{},n.DevExpress.Gantt=t())})(window,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})},t.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){var r,u;if((i&1&&(n=t(n)),i&8)||i&4&&typeof n=="object"&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),i&2&&typeof n!="string")for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r},t.n=function(n){var i=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=31)}([function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){}return n.isExists=function(n){return typeof n!="undefined"&&n!=null},n.isValidJson=function(n){return!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(n.replace(/"(\\.|[^"\\])*"/g,""))},n.evalJson=function(t){return n.isValidJson(t)?eval("("+t+")"):null},n}();t.JsonUtils=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(12),u=function(){function n(){}return n.clientEventRequiresDocScrollCorrection=function(){var n=r.Browser.Safari&&r.Browser.Version<3,t=r.Browser.MacOSMobilePlatform&&r.Browser.Version<5.1;return r.Browser.AndroidDefaultBrowser||r.Browser.AndroidChromeBrowser||!(n||t)},n.getEventX=function(n){return n.clientX+(this.clientEventRequiresDocScrollCorrection()?this.getDocumentScrollLeft():0)},n.getEventY=function(n){return n.clientY+(this.clientEventRequiresDocScrollCorrection()?this.getDocumentScrollTop():0)},n.getEventSource=function(n){return n.srcElement?n.srcElement:n.target},n.GetKeyCode=function(n){return r.Browser.NetscapeFamily||r.Browser.Opera?n.which:n.keyCode},n.GetIsParent=function(n,t){if(!n||!t)return!1;while(t){if(t===n)return!0;if(t.tagName==="BODY")return!1;t=t.parentNode}return!1},n.getCurrentStyle=function(n){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(n,null):window.getComputedStyle(n,null)},n.getTopPaddings=function(n){var t=this.getCurrentStyle(n);return this.pxToInt(t.paddingTop)},n.getLeftPadding=function(n){var t=this.getCurrentStyle(n);return this.pxToInt(t.paddingLeft)},n.getVerticalBordersWidth=function(n){var t=window.getComputedStyle?window.getComputedStyle(n):this.getCurrentStyle(n),i=0;return t.borderTopStyle!="none"&&(i+=this.pxToFloat(t.borderTopWidth)),t.borderBottomStyle!="none"&&(i+=this.pxToFloat(t.borderBottomWidth)),i},n.getHorizontalBordersWidth=function(n){var t=window.getComputedStyle?window.getComputedStyle(n):this.getCurrentStyle(n),i=0;return t.borderLeftStyle!="none"&&(i+=this.pxToFloat(t.borderLeftWidth)),t.borderRightStyle!="none"&&(i+=this.pxToFloat(t.borderRightWidth)),i},n.pxToInt=function(n){return this.pxToNumber(n,parseInt)},n.pxToFloat=function(n){return this.pxToNumber(n,parseFloat)},n.pxToNumber=function(n,t){var r=0,i;if(n!=null&&n!="")try{i=n.indexOf("px");i>-1&&(r=t(n.substr(0,i)))}catch(u){}return r},n.getDocumentScrollTop=function(){var n=r.Browser.IE&&this.getCurrentStyle(document.body).overflow=="hidden"&&document.body.scrollTop>0;return r.Browser.WebKitFamily||r.Browser.Edge||n?r.Browser.MacOSMobilePlatform?window.pageYOffset:r.Browser.WebKitFamily?document.documentElement.scrollTop||document.body.scrollTop:document.body.scrollTop:document.documentElement.scrollTop},n.getDocumentScrollLeft=function(){var n=r.Browser.IE&&this.getCurrentStyle(document.body).overflow=="hidden"&&document.body.scrollLeft>0;return r.Browser.Edge||n?document.body?document.body.scrollLeft:document.documentElement.scrollLeft:r.Browser.WebKitFamily?document.documentElement.scrollLeft||document.body.scrollLeft:document.documentElement.scrollLeft},n.getAbsolutePositionY=function(n){return r.Browser.IE?this.getAbsolutePositionY_IE(n):r.Browser.Firefox&&r.Browser.Version>=3?this.getAbsolutePositionY_FF3(n):r.Browser.Opera?this.getAbsolutePositionY_Opera(n):r.Browser.NetscapeFamily&&(!r.Browser.Firefox||r.Browser.Version<3)?this.getAbsolutePositionY_NS(n):r.Browser.WebKitFamily||r.Browser.Edge?this.getAbsolutePositionY_FF3(n):this.getAbsolutePositionY_Other(n)},n.getAbsolutePositionY_Opera=function(n){var i=!0,t;for(n&&n.tagName=="TR"&&n.cells.length>0&&(n=n.cells[0]),t=this.getAbsoluteScrollOffset_OperaFF(n,!1);n!=null;)t+=n.offsetTop,i||(t-=n.scrollTop),n=n.offsetParent,i=!1;return t+document.body.scrollTop},n.getAbsolutePositionY_IE=function(n){return n==null||r.Browser.IE&&n.parentNode==null?0:n.getBoundingClientRect().top+this.getDocumentScrollTop()},n.getAbsolutePositionY_FF3=function(n){if(n==null)return 0;var t=n.getBoundingClientRect().top+this.getDocumentScrollTop();return Math.round(t)},n.getAbsolutePositionY_NS=function(n){for(var t=this.getAbsoluteScrollOffset_OperaFF(n,!1),i=!0,u;n!=null;)t+=n.offsetTop,i||n.offsetParent==null||(t-=n.scrollTop),!i&&r.Browser.Firefox&&(u=this.getCurrentStyle(n),n.tagName=="DIV"&&u.overflow!="visible"&&(t+=this.pxToInt(u.borderTopWidth))),i=!1,n=n.offsetParent;return t},n.getAbsolutePositionY_Other=function(n){for(var t=0,i=!0;n!=null;)t+=n.offsetTop,i||n.offsetParent==null||(t-=n.scrollTop),i=!1,n=n.offsetParent;return t},n.getAbsoluteScrollOffset_OperaFF=function(n,t){for(var r=0,u=!0,i;n!=null;){if(n.tagName=="BODY")break;if(i=this.getCurrentStyle(n),i.position=="absolute")break;u||n.tagName!="DIV"||i.position!=""&&i.position!="static"||(r-=t?n.scrollLeft:n.scrollTop);n=n.parentNode;u=!1}return r},n.getAbsolutePositionX=function(n){return r.Browser.IE?this.getAbsolutePositionX_IE(n):r.Browser.Firefox&&r.Browser.Version>=3?this.getAbsolutePositionX_FF3(n):r.Browser.Opera?this.getAbsolutePositionX_Opera(n):r.Browser.NetscapeFamily&&(!r.Browser.Firefox||r.Browser.Version<3)?this.getAbsolutePositionX_NS(n):r.Browser.WebKitFamily||r.Browser.Edge?this.getAbsolutePositionX_FF3(n):this.getAbsolutePositionX_Other(n)},n.getAbsolutePositionX_Opera=function(n){for(var i=!0,t=this.getAbsoluteScrollOffset_OperaFF(n,!0);n!=null;)t+=n.offsetLeft,i||(t-=n.scrollLeft),n=n.offsetParent,i=!1;return t+document.body.scrollLeft},n.getAbsolutePositionX_IE=function(n){return n==null||r.Browser.IE&&n.parentNode==null?0:n.getBoundingClientRect().left+this.getDocumentScrollLeft()},n.getAbsolutePositionX_FF3=function(n){if(n==null)return 0;var t=n.getBoundingClientRect().left+this.getDocumentScrollLeft();return Math.round(t)},n.getAbsolutePositionX_NS=function(n){for(var t=this.getAbsoluteScrollOffset_OperaFF(n,!0),i=!0,u;n!=null;)t+=n.offsetLeft,i||n.offsetParent==null||(t-=n.scrollLeft),!i&&r.Browser.Firefox&&(u=this.getCurrentStyle(n),n.tagName=="DIV"&&u.overflow!="visible"&&(t+=this.pxToInt(u.borderLeftWidth))),i=!1,n=n.offsetParent;return t},n.getAbsolutePositionX_Other=function(n){for(var t=0,i=!0;n!=null;)t+=n.offsetLeft,i||n.offsetParent==null||(t-=n.scrollLeft),i=!1,n=n.offsetParent;return t},n.GetEvent=function(n){return typeof event!="undefined"&&event!=null&&r.Browser.IE?event:n},n.isExists=function(n){return typeof n!="undefined"&&n!=null},n.isTouchEvent=function(t){return t?r.Browser.WebKitTouchUI&&n.isExists(t.changedTouches):!1},n.IsLeftButtonPressed=function(t){return n.isTouchEvent(t)?!0:(t=n.GetEvent(t),!t)?!1:r.Browser.IE&&r.Browser.Version<11?r.Browser.MSTouchUI?!0:t.button%2==1:r.Browser.WebKitFamily?t.type==="pointermove"?t.buttons===1:t.which==1:r.Browser.NetscapeFamily||r.Browser.Edge||r.Browser.IE&&r.Browser.Version>=11?t.type===n.touchMouseMoveEventName?t.buttons===1:t.which==1:r.Browser.Opera?t.button==0:!0},n.touchMouseMoveEventName=r.Browser.WebKitTouchUI?"touchmove":r.Browser.Edge&&r.Browser.MSTouchUI&&window.PointerEvent?"pointermove":"mousemove",n.getMouseWheelEventName=function(){return r.Browser.Safari?"mousewheel":r.Browser.NetscapeFamily&&r.Browser.MajorVersion<17?"DOMMouseScroll":"wheel"},n.getWheelDelta=function(n){var t;return t=r.Browser.NetscapeFamily&&r.Browser.MajorVersion<17?-n.detail:r.Browser.Safari?n.wheelDelta:-n.deltaY,r.Browser.Opera&&r.Browser.Version<9&&(t=-t),t},n.IsRightButtonPressed=function(t){return(t=n.GetEvent(t),!n.isExists(t))?!1:r.Browser.IE||r.Browser.Edge?t.type==="pointermove"?t.buttons===2:t.button==2:r.Browser.NetscapeFamily||r.Browser.WebKitFamily?t.which==3:r.Browser.Opera?t.button==1:!0},n}();t.DomUtils=u},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(22),f=i(23),u=i(0),o=i(10),e=i(24),s=function(){function n(){}return n.compareDates=function(n,t){return!n||!t?-1:t.getTime()-n.getTime()},n.areDatesEqual=function(n,t){return this.compareDates(n,t)==0},n.getMaxDate=function(n,t){if(!n&&!t)return null;if(!n)return t;if(!t)return n;var i=this.compareDates(n,t);return i>0?t:n},n.getMinDate=function(n,t){if(!n&&!t)return null;if(!n)return t;if(!t)return n;var i=this.compareDates(n,t);return i>0?n:t},n.getDaysBetween=function(n,t){var i=Math.abs(t.getTime()-n.getTime());return Math.ceil(i/this.msInDay)},n.getWeeksBetween=function(n,t){var r=this.getDaysBetween(n,t),i=Math.floor(r/7);return n.getDay()>t.getDay()&&i++,i},n.getMonthsDifference=function(n,t){var i=this.compareDates(n,t),r=i>=0?n:t,u=i>=0?t:n,f=u.getFullYear()-r.getFullYear();return f*12+(u.getMonth()-r.getMonth())},n.getYearsDifference=function(n,t){return Math.abs(t.getFullYear()-n.getFullYear())},n.getDayNumber=function(n){return Math.ceil(n.getTime()/this.msInDay)},n.getDateByDayNumber=function(n){var t=new Date(n*this.msInDay);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t},n.addDays=function(n,t){return new Date(n.getTime()+t*this.msInDay)},n.checkDayOfMonth=function(n,t){return n==t.getDate()},n.checkDayOfWeek=function(n,t){return n==t.getDay()},n.checkMonth=function(n,t){return n==t.getMonth()},n.checkYear=function(n,t){return n==t.getFullYear()},n.checkDayOfWeekOccurrenceInMonth=function(n,t,i){var r=this.getSpecificDayOfWeekInMonthDates(t,n.getFullYear(),n.getMonth());return i==e.DayOfWeekMonthlyOccurrence.Last?this.areDatesEqual(n,r[r.length-1]):this.areDatesEqual(n,r[i])},n.getFirstDayOfWeekInMonth=function(n,t){var i=new Date(n,t,1);return i.getDay()},n.getSpecificDayOfWeekInMonthDates=function(n,t,i){for(var u=this.getFirstDayOfWeekInMonth(t,i),e=n>=u?n-u:n+7-u,f=[],r=new Date(t,i,e+1);r.getMonth()==i;)f.push(r),r=this.addDays(r,7);return f},n.getSpecificDayOfWeekInMonthDate=function(n,t,i,r){var u=this.getSpecificDayOfWeekInMonthDates(n,t,i);return r==e.DayOfWeekMonthlyOccurrence.Last?u[u.length-1]:u[r]},n.checkValidDayInMonth=function(n,t,i){return i<1||i>31||new Date(n,t,i).getMonth()!=t?!1:!0},n.getNextMonth=function(n,t){return t===void 0&&(t=1),(n+t)%12},n.convertToDate=function(n){if(n instanceof Date)return new Date(n);var t=Date.parse(n);return isNaN(t)?null:new Date(t)},n.convertTimeRangeToDateRange=function(n,t){var u=this.getDateByDayNumber(t),f=u.getFullYear(),e=u.getMonth(),s=u.getDate(),i=n.start,h=new Date(f,e,s,i.hour,i.min,i.sec,i.msec),r=n.end,c=new Date(f,e,s,r.hour,r.min,r.sec,r.msec);return new o.DateRange(h,c)},n.convertToTimeRanges=function(n){var t=this;return n instanceof Array?n.map(function(n){return t.convertToTimeRange(n)}):this.parseTimeRanges(n)},n.convertToTimeRange=function(n){return n?n instanceof f.TimeRange?n:u.JsonUtils.isExists(n.start)&&u.JsonUtils.isExists(n.end)?new f.TimeRange(this.convertToTime(n.start),this.convertToTime(n.end)):this.parseTimeRange(n):null},n.convertToTime=function(n){return n?n instanceof r.Time?n:n instanceof Date?this.getTimeGromJsDate(n):this.parseTime(n):null},n.parseTimeRanges=function(n){var i=this,t;return n?(t=n.split(/;|,/),t.map(function(n){return i.parseTimeRange(n)}).filter(function(n){return!!n})):null},n.parseTimeRange=function(n){if(!n)return null;var t=n.split("-"),i=t[0],r=t[1];return u.JsonUtils.isExists(i)&&u.JsonUtils.isExists(r)?new f.TimeRange(this.parseTime(i),this.parseTime(r)):null},n.parseTime=function(n){if(!n)return null;var t=n.split(":"),i=parseInt(t[0])||0,u=parseInt(t[1])||0,f=parseInt(t[2])||0,e=parseInt(t[3])||0;return new r.Time(i,u,f,e)},n.getTimeGromJsDate=function(n){if(!n)return null;var t=n.getHours(),i=n.getMinutes(),u=n.getSeconds(),f=n.getMilliseconds();return new r.Time(t,i,u,f)},n.caclTimeDifference=function(n,t){return t.getTimeInMilleconds()-n.getTimeInMilleconds()},n.areTimesEqual=function(n,t){return this.caclTimeDifference(n,t)==0},n.getMaxTime=function(n,t){if(!n&&!t)return null;if(!n)return t;if(!t)return n;var i=this.caclTimeDifference(n,t);return i>0?t:n},n.getMinTime=function(n,t){if(!n&&!t)return null;if(!n)return t;if(!t)return n;var i=this.caclTimeDifference(n,t);return i>0?n:t},n.getLastTimeOfDay=function(){return new r.Time(23,59,59,999)},n.msInDay=864e5,n}();t.DateTimeUtils=s},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t){this.x=null;this.y=null;n!==undefined&&(this.x=n);t!==undefined&&(this.y=t)}return n}();t.Point=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),u=function(){function n(){this.internalId=this.generateGuid()}return n.prototype.assignFromObject=function(n){r.JsonUtils.isExists(n)&&r.JsonUtils.isExists(n.id)&&(this.id=n.id,this.internalId=String(n.id))},n.prototype.generateGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})},n}();t.DataObject=u},function(n,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0});i=function(){function n(n){this.control=n}return Object.defineProperty(n.prototype,"modelManipulator",{get:function(){return this.control.modelManipulator},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"history",{get:function(){return this.control.history},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this._state||(this._state=this.getState()),this._state},enumerable:!0,configurable:!0}),n.prototype.execute=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.state.enabled?this.executeInternal.apply(this,t):!1},n.prototype.isEnabled=function(){return this.control.settings.editing.enabled},n.prototype.executeInternal=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];throw new Error("Not implemented");},n}();t.CommandBase=i;r=function(){function n(n,t){this.visible=!0;this.enabled=n;this.value=t}return n}();t.SimpleCommandState=r},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),u=function(){function n(){this._items=[];this._isGanttCollection=!0}return n.prototype.add=function(n){if(r.JsonUtils.isExists(n)){if(!!this.getItemById(n.internalId))throw"The collection item with id ='"+n.internalId+"' already exists.";this._items.push(n)}},n.prototype.addRange=function(n){for(var t=0;t<n.length;t++)this.add(n[t])},n.prototype.remove=function(n){var t=this._items.indexOf(n);t>-1&&t<this._items.length&&this._items.splice(t,1)},n.prototype.clear=function(){this._items.splice(0,this._items.length)},Object.defineProperty(n.prototype,"items",{get:function(){return this._items.slice()},set:function(n){n&&(this._items=n.slice())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),n.prototype.getItem=function(n){return n>-1&&n<this._items.length?this._items[n]:null},n.prototype.getItemById=function(n){return this._items.filter(function(t){return t.internalId===n})[0]},n.prototype.getItemByPublicId=function(n){return this._items.filter(function(t){return t.id===n||t.id.toString()===n})[0]},n.prototype.assign=function(n){r.JsonUtils.isExists(n)&&(this.items=n.items)},n.prototype.importFromObject=function(n){r.JsonUtils.isExists(n)&&(this.clear(),n._isGanttCollection?this.assign(n):n instanceof Array?this.importFromArray(n):this.createItemFromObjectAndAdd(n))},n.prototype.createItemFromObjectAndAdd=function(n){if(r.JsonUtils.isExists(n)){var t=this.createItem();t.assignFromObject(n);this.add(t)}},n.prototype.importFromArray=function(n){for(var t=0;t<n.length;t++)this.createItemFromObjectAndAdd(n[t])},n.prototype.importFromJSON=function(n){this.importFromObject(r.JsonUtils.evalJson(n))},n}();t.CollectionBase=u},function(n,t){"use strict";var i,r,u;Object.defineProperty(t,"__esModule",{value:!0}),function(n){n[n.TenMinutes=0]="TenMinutes";n[n.Hours=1]="Hours";n[n.SixHours=2]="SixHours";n[n.Days=3]="Days";n[n.Weeks=4]="Weeks";n[n.Months=5]="Months";n[n.Quarter=6]="Quarter";n[n.Years=7]="Years"}(i=t.ViewType||(t.ViewType={})),function(n){n[n.Left=0]="Left";n[n.Top=1]="Top";n[n.Right=2]="Right";n[n.Bottom=3]="Bottom"}(r=t.Position||(t.Position={})),function(n){n[n.Inside=0]="Inside";n[n.Outside=1]="Outside";n[n.None=2]="None"}(u=t.TaskTitlePosition||(t.TaskTitlePosition={}))},function(n,t,i){"use strict";var f;Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),u=i(3),e=i(12),o;(function(n){n[n.TaskArea=0]="TaskArea";n[n.TaskEdit_Frame=1]="TaskEdit_Frame";n[n.TaskEdit_Progress=2]="TaskEdit_Progress";n[n.TaskEdit_Start=3]="TaskEdit_Start";n[n.TaskEdit_End=4]="TaskEdit_End";n[n.TaskEdit_DependencyStart=5]="TaskEdit_DependencyStart";n[n.TaskEdit_DependencyFinish=6]="TaskEdit_DependencyFinish";n[n.Successor_Wrapper=7]="Successor_Wrapper";n[n.Successor_DependencyStart=8]="Successor_DependencyStart";n[n.Successor_DependencyFinish=9]="Successor_DependencyFinish"})(o=t.MouseEventSource||(t.MouseEventSource={}));f=function(){function n(n){this.ganttView=n;this.eventManager=n.eventManager;this.mousePosition=new u.Point(-1,-1);this.initMouseEvents()}return n.prototype.initMouseEvents=function(){var n=this;this.ganttView.taskArea.addEventListener("click",function(t){n.onTaskAreaClick(t)});this.ganttView.taskArea.addEventListener("scroll",this.ganttView.updateView.bind(this.ganttView));this.ganttView.taskArea.addEventListener("mousedown",function(t){n.onMouseDown(t)});this.ganttView.taskArea.addEventListener("contextmenu",function(t){n.onContextMenu(t)});this.ganttView.taskArea.addEventListener(r.DomUtils.getMouseWheelEventName(),function(t){n.onMouseWheel(t)});document.addEventListener("mousemove",function(t){n.onDocumentMouseMove(t)});document.addEventListener("mouseup",function(t){n.onDocumentMouseUp(t)});document.addEventListener("keydown",function(t){n.onDocumentKeyDown(t)})},n.prototype.onMouseDown=function(n){this.eventManager.onMouseDown(n);this.preventSelect=!1;this.mousePosition=new u.Point(n.clientX,n.clientY)},n.prototype.onDocumentMouseUp=function(n){var t=this;this.ganttView.isFocus=r.DomUtils.GetIsParent(this.ganttView.taskArea,r.DomUtils.getEventSource(n))?!0:!1;this.ganttView.isFocus&&!this.preventSelect&&this.ganttView.settings.allowSelectTask&&!this.isConnectorLine(n)&&setTimeout(function(){t.changeTaskSelection(t.getClickedTaskIndex(n))},0);this.eventManager.onMouseUp(n)},n.prototype.onDocumentMouseMove=function(n){if(this.mousePosition.x!=n.clientX||this.mousePosition.y!=n.clientY){this.eventManager.onMouseMove(n);this.preventSelect=!0}},n.prototype.onMouseWheel=function(n){this.eventManager.onMouseWheel(n)},n.prototype.onDocumentKeyDown=function(n){this.eventManager.onKeyDown(n)},n.prototype.onContextMenu=function(n){n.stopPropagation&&n.stopPropagation();n.preventDefault&&n.preventDefault();e.Browser.WebKitFamily&&(n.returnValue=!1);this.ganttView.ganttOwner.showPopupMenu(new u.Point(r.DomUtils.getEventX(n),r.DomUtils.getEventY(n)))},n.prototype.getClickedTaskIndex=function(n){var t=r.DomUtils.getEventY(n),i=r.DomUtils.getAbsolutePositionY(this.ganttView.taskArea),u=t-i;return Math.floor(u/this.ganttView.tickSize.height)},n.prototype.onTaskElementHover=function(n){var t=this.getClickedTaskIndex(n);this.ganttView.taskEditController.show(t)},n.prototype.changeTaskSelection=function(n){var t=this.ganttView.viewModel.items[n];t&&(this.ganttView.unselectCurrentSelectedTask(),this.ganttView.ganttOwner.changeGanttTaskSelection(t.task.id,!0),this.ganttView.selectTask(t.task.internalId))},n.prototype.onTaskAreaClick=function(t){var i=new Date(Date.now()),u=this.getClickedTaskIndex(t),r;this.time&&i.getTime()-this.time.getTime()<n.DBLCLICK_INTERVAL&&(r=this.ganttView.viewModel.items[u],this.ganttView.commandManager.showTaskEditDialog.execute(r.task));this.time=i},n.prototype.isConnectorLine=function(n){var t=r.DomUtils.getEventSource(n);return t.classList.contains(this.ganttView.gridLayoutCalculator.getConnectorClassName(!0))||t.classList.contains(this.ganttView.gridLayoutCalculator.getConnectorClassName(!1))},n.DBLCLICK_INTERVAL=300,n}();t.TaskAreaManager=f},function(n,t){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),i,r;Object.defineProperty(t,"__esModule",{value:!0});i=function(){function n(n){this.modelManipulator=n}return n}();t.HistoryItem=i;r=function(n){function t(){var t=n.call(this,null)||this;return t.historyItems=[],t}return u(t,n),t.prototype.redo=function(){for(var n,t=0;n=this.historyItems[t];t++)n.redo()},t.prototype.undo=function(){for(var n,t=this.historyItems.length-1;n=this.historyItems[t];t--)n.undo()},t.prototype.add=function(n){if(n==null)throw new Error("Can't add null HistoryItem");this.historyItems.push(n)},t}(i);t.CompositionHistoryItem=r},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t){this.start=n;this.end=t}return n}();t.DateRange=i},function(n,t,i){"use strict";var h=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var c=i(4),f=i(46),e=i(24),o=i(47),u=i(0),r=i(2),s=i(25),l=function(n){function t(t,i,r,u){t===void 0&&(t=null);i===void 0&&(i=null);r===void 0&&(r=1);u===void 0&&(u=0);var f=n.call(this)||this;return f._start=null,f._end=null,f._interval=1,f._occurrenceCount=0,f._dayOfWeek=0,f._day=1,f._dayOfWeekOccurrence=0,f._month=0,f._calculateByDayOfWeek=!1,f.start=t,f.end=i,f.interval=r,f.occurrenceCount=u,f}return h(t,n),t.prototype.assignFromObject=function(t){u.JsonUtils.isExists(t)&&(n.prototype.assignFromObject.call(this,t),this.start=r.DateTimeUtils.convertToDate(t.start),this.end=r.DateTimeUtils.convertToDate(t.end),u.JsonUtils.isExists(t.interval)&&(this.interval=t.interval),u.JsonUtils.isExists(t.occurrenceCount)&&(this.occurrenceCount=t.occurrenceCount),u.JsonUtils.isExists(t.dayOfWeek)&&(this.dayOfWeekInternal=s.RecurrenceFactory.getEnumValue(f.DayOfWeek,t.dayOfWeek)),u.JsonUtils.isExists(t.day)&&(this.dayInternal=t.day),u.JsonUtils.isExists(t.dayOfWeekOccurrence)&&(this.dayOfWeekOccurrenceInternal=s.RecurrenceFactory.getEnumValue(e.DayOfWeekMonthlyOccurrence,t.dayOfWeekOccurrence)),u.JsonUtils.isExists(t.month)&&(this.monthInternal=s.RecurrenceFactory.getEnumValue(o.Month,t.month)),u.JsonUtils.isExists(t.calculateByDayOfWeek)&&(this._calculateByDayOfWeek=!!t.calculateByDayOfWeek))},t.prototype.calculatePoints=function(n,t){if(!n||!t)return[];var i=r.DateTimeUtils.getMaxDate(n,this._start),u=r.DateTimeUtils.getMinDate(t,this._end);return this._occurrenceCount>0?this.calculatePointsByOccurrenceCount(i,u):this.calculatePointsByDateRange(i,u)},t.prototype.calculatePointsByOccurrenceCount=function(n,t){for(var u=[],i=this.getFirstPoint(n);!!i&&u.length<this._occurrenceCount&&r.DateTimeUtils.compareDates(i,t)>=0;)this.isRecurrencePoint(i)&&u.push(i),i=this.getNextPoint(i);return u},t.prototype.calculatePointsByDateRange=function(n,t){for(var u=[],i=this.getFirstPoint(n);!!i&&r.DateTimeUtils.compareDates(i,t)>=0;)this.isRecurrencePoint(i)&&u.push(i),i=this.getNextPoint(i);return u},t.prototype.getFirstPoint=function(n){return this.isRecurrencePoint(n)?n:this.getNextPoint(n)},t.prototype.isRecurrencePoint=function(n){return this.isDateInRange(n)&&this.checkDate(n)&&(!this.useIntervalInCalc()||this.checkInterval(n))},t.prototype.isDateInRange=function(n){return n?this._start&&r.DateTimeUtils.compareDates(this.start,n)<0?!1:this._occurrenceCount==0&&this.end&&r.DateTimeUtils.compareDates(n,this.end)<0?!1:!0:!1},t.prototype.useIntervalInCalc=function(){return this.interval>1&&!!this._start},t.prototype.getNextPoint=function(n){return this.isDateInRange(n)?this.useIntervalInCalc()?this.calculatePointByInterval(n):this.calculateNearestPoint(n):null},t.prototype.getSpecDayInMonth=function(n,t){return this._calculateByDayOfWeek?r.DateTimeUtils.getSpecificDayOfWeekInMonthDate(this.dayOfWeekInternal,n,t,this.dayOfWeekOccurrenceInternal):new Date(n,t,this.dayInternal)},Object.defineProperty(t.prototype,"dayInternal",{get:function(){return this._day},set:function(n){n>0&&n<=31&&(this._day=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dayOfWeekInternal",{get:function(){return this._dayOfWeek},set:function(n){n>=f.DayOfWeek.Sunday&&n<=f.DayOfWeek.Saturday&&(this._dayOfWeek=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dayOfWeekOccurrenceInternal",{get:function(){return this._dayOfWeekOccurrence},set:function(n){n>=e.DayOfWeekMonthlyOccurrence.First&&n<=e.DayOfWeekMonthlyOccurrence.Last&&(this._dayOfWeekOccurrence=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"monthInternal",{get:function(){return this._month},set:function(n){n>=o.Month.January&&n<=o.Month.December&&(this._month=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this._start},set:function(n){n&&(this._start=n,!!this._end&&n>this._end&&(this._end=n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},set:function(n){n&&(this._end=n,!!this._start&&n<this._start&&(this._start=n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"occurrenceCount",{get:function(){return this._occurrenceCount},set:function(n){n<0&&(n=0);this._occurrenceCount=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interval",{get:function(){return this._interval},set:function(n){n>0&&(this._interval=n)},enumerable:!0,configurable:!0}),t}(c.DataObject);t.RecurrenceBase=l},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){}return n.IdentUserAgent=function(t,i){var v,l,y,p,rt,g,o,nt,s,w,b;i===void 0&&(i=!1);var h=["Mozilla","IE","Firefox","Netscape","Safari","Chrome","Opera","Opera10","Edge"],c="IE",k="Win",d={Safari:2,Chrome:.1,Mozilla:1.9,Netscape:8,Firefox:2,Opera:9,IE:6,Edge:12};if(!t||t.length==0){n.fillUserAgentInfo(h,c,d[c],k);return}t=t.toLowerCase();n.indentPlatformMajorVersion(t);try{var a={Windows:"Win",Macintosh:"Mac","Mac OS":"Mac",Mac_PowerPC:"Mac","cpu os":"MacMobile","cpu iphone os":"MacMobile",Android:"Android","!Windows Phone":"WinPhone","!WPDesktop":"WinPhone","!ZuneWP":"WinPhone"},e="(?:/|\\s*)?",tt="(\\d+)(?:\\.((?:\\d+?[1-9])|\\d)0*?)?",f="(?:"+tt+")?",it={Safari:"applewebkit(?:.*?(?:version/"+tt+"[\\.\\w\\d]*?(?:\\s+mobile/\\S*)?\\s+safari))?",Chrome:"(?:chrome|crios)(?!frame)"+e+f,Mozilla:"mozilla(?:.*rv:"+f+".*Gecko)?",Netscape:"(?:netscape|navigator)\\d*/?\\s*"+f,Firefox:"firefox"+e+f,Opera:"(?:opera|sopr)"+e+f,Opera10:"opera.*\\s*version"+e+f,IE:"msie\\s*"+f,Edge:"edge"+e+f},u,r=-1;for(v=0;v<h.length;v++)if(l=h[v],y=new RegExp(it[l],"i"),y.compile&&y.compile(it[l],"i"),p=y.exec(t),p&&p.index>=0){if(u=="IE"&&r>=11&&l=="Safari")continue;u=l;u=="Opera10"&&(u="Opera");rt="trident"+e+f;r=n.GetBrowserVersion(t,p,rt,n.getIECompatibleVersionString());u=="Mozilla"&&r>=11&&(u="IE")}u||(u=c);g=r!=-1;g||(r=d[u]);nt=Number.MAX_VALUE;for(s in a)a.hasOwnProperty(s)&&(w=s.substr(0,1)=="!",b=t.indexOf((w?s.substr(1):s).toLowerCase()),b>=0&&(b<nt||w)&&(nt=w?0:b,o=a[s]));var ut=t.toUpperCase().match("SM-[A-Z]"),ft=ut&&ut.length>0;o=="WinPhone"&&r<9&&(r=Math.floor(n.getVersionFromTrident(t,"trident"+e+f)));!i&&u=="IE"&&r>7&&document.documentMode<r&&(r=document.documentMode);o=="WinPhone"&&(r=Math.max(9,r));o||(o=k);o!=a["cpu os"]||g||(r=4);n.fillUserAgentInfo(h,u,r,o,ft)}catch(et){n.fillUserAgentInfo(h,c,d[c],k)}},n.GetBrowserVersion=function(t,i,r,u){var e=n.getVersionFromMatches(i),f;return u&&(f=n.getVersionFromTrident(t,r),u==="edge"||parseInt(u)===f)?f:e},n.getIECompatibleVersionString=function(){if(document.compatible)for(var n=0;n<document.compatible.length;n++)if(document.compatible[n].userAgent==="IE"&&document.compatible[n].version)return document.compatible[n].version.toLowerCase();return""},n.fillUserAgentInfo=function(t,i,r,u,f){var e,o,s,h;for(f===void 0&&(f=!1),e=0;e<t.length;e++)o=t[e],n[o]=o==i;n.Version=Math.floor(10*r)/10;n.MajorVersion=Math.floor(n.Version);n.WindowsPlatform=u=="Win"||u=="WinPhone";n.MacOSPlatform=u=="Mac";n.MacOSMobilePlatform=u=="MacMobile";n.AndroidMobilePlatform=u=="Android";n.WindowsPhonePlatform=u=="WinPhone";n.WebKitFamily=n.Safari||n.Chrome||n.Opera&&n.MajorVersion>=15;n.NetscapeFamily=n.Netscape||n.Mozilla||n.Firefox;n.HardwareAcceleration=n.IE&&n.MajorVersion>=9||n.Firefox&&n.MajorVersion>=4||n.AndroidMobilePlatform&&n.Chrome||n.Chrome&&n.MajorVersion>=37||n.Safari&&!n.WindowsPlatform||n.Edge||n.Opera&&n.MajorVersion>=46;n.WebKitTouchUI=n.MacOSMobilePlatform||n.AndroidMobilePlatform;s=n.IE&&n.MajorVersion>9&&n.WindowsPlatform&&n.UserAgent.toLowerCase().indexOf("touch")>=0;n.MSTouchUI=s||n.Edge&&!!window.navigator.maxTouchPoints;n.TouchUI=n.WebKitTouchUI||n.MSTouchUI;n.MobileUI=n.WebKitTouchUI||n.WindowsPhonePlatform;n.AndroidDefaultBrowser=n.AndroidMobilePlatform&&!n.Chrome;n.AndroidChromeBrowser=n.AndroidMobilePlatform&&n.Chrome;f&&(n.SamsungAndroidDevice=f);n.MSTouchUI?(h=n.UserAgent.toLowerCase().indexOf("arm;")>-1,n.VirtualKeyboardSupported=h||n.WindowsPhonePlatform):n.VirtualKeyboardSupported=n.WebKitTouchUI;n.fillDocumentElementBrowserTypeClassNames(t)},n.indentPlatformMajorVersion=function(t){var i=/(?:(?:windows nt|macintosh|mac os|cpu os|cpu iphone os|android|windows phone|linux) )(\d+)(?:[-0-9_.])*/.exec(t);i&&(n.PlaformMajorVersion=i[1])},n.prototype.GetBrowserVersion=function(t,i,r,u){var e=n.getVersionFromMatches(i),f;return u&&(f=n.getVersionFromTrident(t,r),u==="edge"||parseInt(u)===f)?f:e},n.getVersionFromMatches=function(n){var t=-1,i="";return n[1]&&(i+=n[1],n[2]&&(i+="."+n[2])),i!=""&&(t=parseFloat(i),isNaN(t)&&(t=-1)),t},n.getVersionFromTrident=function(t,i){var r=new RegExp(i,"i").exec(t);return n.getVersionFromMatches(r)+4},n.fillDocumentElementBrowserTypeClassNames=function(t){for(var u,i="",f=t.concat(["WindowsPlatform","MacOSPlatform","MacOSMobilePlatform","AndroidMobilePlatform","WindowsPhonePlatform","WebKitFamily","WebKitTouchUI","MSTouchUI","TouchUI","AndroidDefaultBrowser"]),r=0;r<f.length;r++)u=f[r],n[u]&&(i+="dx"+u+" ");i+="dxBrowserVersion-"+n.MajorVersion;document&&document.documentElement&&(document.documentElement.className!=""&&(i=" "+i),document.documentElement.className+=i,n.Info=i)},n.UserAgent=window.navigator.userAgent.toLowerCase(),n._foo=n.IdentUserAgent(n.UserAgent),n}();t.Browser=i},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=i(6),f=i(35),e=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.createItem=function(){return new f.Resource},t}(u.CollectionBase);t.ResourceCollection=e},function(n,t,i){"use strict";var e=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u,o,f;Object.defineProperty(t,"__esModule",{value:!0});r=i(4);u=i(0),function(n){n[n.FS=0]="FS";n[n.SS=1]="SS";n[n.FF=2]="FF";n[n.SF=3]="SF"}(o=t.DependencyType||(t.DependencyType={}));f=function(n){function t(){var t=n.call(this)||this;return t.predecessorId="",t.successorId="",t.type=null,t}return e(t,n),t.prototype.assignFromObject=function(t){u.JsonUtils.isExists(t)&&(n.prototype.assignFromObject.call(this,t),this.internalId=String(t.id),this.predecessorId=String(t.predecessorId),this.successorId=String(t.successorId),this.type=t.type)},t}(r.DataObject);t.Dependency=f},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t){this.width=null;this.height=null;n!==undefined&&(this.width=n);t!==undefined&&(this.height=t)}return n}();t.Size=i},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),e,f,o,u;Object.defineProperty(t,"__esModule",{value:!0});e=i(58);f=function(){function n(n,t){this.viewModel=n;this.dispatcher=t}return n}();t.BaseManipulator=f;o=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.title=new s(t,i),r.description=new h(t,i),r.progress=new c(t,i),r.start=new l(t,i),r.end=new a(t,i),r}return r(t,n),t}(f);t.TaskPropertiesManipulator=o;u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.setValue=function(n,t){var i=this.viewModel.tasks.getItemById(n),r=new e.HistoryItemState(n,this.getPropertyValue(i));return this.setPropertyValue(i,t),this.viewModel.owner.resetAndUpdate(),r},t.prototype.restoreValue=function(n){if(n){var t=n.value,i=this.viewModel.tasks.getItemById(n.taskId);this.setPropertyValue(i,t);this.viewModel.owner.resetAndUpdate()}},t}(f);t.TaskPropertyManipulator=u;var s=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.getPropertyValue=function(n){return n.title},t.prototype.setPropertyValue=function(n,t){n.title=t;this.dispatcher.notifyTaskTitleChanged(n.id,t)},t}(u),h=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.getPropertyValue=function(n){return n.description},t.prototype.setPropertyValue=function(n,t){n.description=t;this.dispatcher.notifyTaskDescriptionChanged(n.id,t)},t}(u),c=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.getPropertyValue=function(n){return n.progress},t.prototype.setPropertyValue=function(n,t){n.progress=t;this.dispatcher.notifyTaskProgressChanged(n.id,t)},t}(u),l=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.getPropertyValue=function(n){return n.start},t.prototype.setPropertyValue=function(n,t){n.start=t;this.dispatcher.notifyTaskStartChanged(n.id,t)},t}(u),a=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.getPropertyValue=function(n){return n.end},t.prototype.setPropertyValue=function(n,t){n.end=t;this.dispatcher.notifyTaskEndChanged(n.id,t)},t}(u)},function(n,t,i){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var f=i(66),e=i(3),r=i(1),o=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.onMouseDoubleClick=function(){},t.prototype.onMouseDown=function(){},t.prototype.onMouseUp=function(){},t.prototype.onMouseMove=function(){},t.prototype.onMouseWheel=function(){},t.prototype.getRelativePos=function(n){var t=r.DomUtils.getAbsolutePositionX(this.handler.control.taskArea),i=r.DomUtils.getAbsolutePositionY(this.handler.control.taskArea);return new e.Point(n.x-t,n.y-i)},t}(f.HandlerStateBase);t.MouseHandlerStateBase=o},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=i(3),r=i(1),e=i(17),o=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return f(t,n),t.prototype.onMouseDown=function(n){this.currentPosition=new u.Point(r.DomUtils.getEventX(n),r.DomUtils.getEventY(n))},t.prototype.onMouseUp=function(n){this.onMouseUpInternal(n);this.handler.switchToDefaultState();this.handler.onMouseUp(n)},t.prototype.onMouseMove=function(n){n.preventDefault();var t=new u.Point(r.DomUtils.getEventX(n),r.DomUtils.getEventY(n));this.onMouseMoveInternal(t);this.currentPosition=t},t.prototype.onMouseUpInternal=function(){},t.prototype.onMouseMoveInternal=function(){},t}(e.MouseHandlerStateBase);t.MouseHandlerDragBaseState=o},function(n,t,i){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,f,e;Object.defineProperty(t,"__esModule",{value:!0});r=i(9);f=function(n){function t(t,i,r,u){var f=n.call(this,t)||this;return f.predecessorId=i,f.successorId=r,f.type=u,f}return u(t,n),t.prototype.redo=function(){this.dependency=this.modelManipulator.dependency.insertDependency(this.predecessorId,this.successorId,this.type)},t.prototype.undo=function(){this.modelManipulator.dependency.removeDependency(this.dependency.internalId)},t}(r.HistoryItem);t.InsertDependencyHistoryItem=f;e=function(n){function t(t,i){var r=n.call(this,t)||this;return r.dependencyId=i,r}return u(t,n),t.prototype.redo=function(){this.dependency=this.modelManipulator.dependency.removeDependency(this.dependencyId)},t.prototype.undo=function(){this.dependencyId=this.modelManipulator.dependency.insertDependency(this.dependency.predecessorId,this.dependency.successorId,this.dependency.type).internalId},t}(r.HistoryItem);t.RemoveDependencyHistoryItem=e},function(n,t,i){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,f,e,o,s;Object.defineProperty(t,"__esModule",{value:!0});r=i(9);f=function(n){function t(t,i){var r=n.call(this,t)||this;return r.text=i,r}return u(t,n),t.prototype.redo=function(){this.resource=this.modelManipulator.resource.create(this.text,this.resource?this.resource.internalId:null)},t.prototype.undo=function(){this.modelManipulator.resource.remove(this.resource.internalId)},t}(r.HistoryItem);t.CreateResourceHistoryItem=f;e=function(n){function t(t,i){var r=n.call(this,t)||this;return r.resourceId=i,r}return u(t,n),t.prototype.redo=function(){this.resource=this.modelManipulator.resource.remove(this.resourceId)},t.prototype.undo=function(){this.modelManipulator.resource.create(this.resource.text,this.resourceId)},t}(r.HistoryItem);t.RemoveResourceHistoryItem=e;o=function(n){function t(t,i,r){var u=n.call(this,t)||this;return u.resourceId=i,u.taskId=r,u}return u(t,n),t.prototype.redo=function(){this.assignment=this.modelManipulator.resource.assign(this.resourceId,this.taskId)},t.prototype.undo=function(){this.modelManipulator.resource.deassig(this.assignment.internalId)},t}(r.HistoryItem);t.AssignResourceHistoryItem=o;s=function(n){function t(t,i){var r=n.call(this,t)||this;return r.assignmentId=i,r}return u(t,n),t.prototype.redo=function(){this.assignment=this.modelManipulator.resource.deassig(this.assignmentId)},t.prototype.undo=function(){this.assignmentId=this.modelManipulator.resource.assign(this.assignment.resourceId,this.assignment.taskId).internalId},t}(r.HistoryItem);t.DeassignResourceHistoryItem=s},function(n,t,i){"use strict";var e=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u,f;Object.defineProperty(t,"__esModule",{value:!0});r=i(5);u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return e(t,n),t.prototype.executeInternal=function(n){var t=this,i=this.createParameters(n),r=i.clone();return this.control.ganttOwner.showDialog(this.getDialogName(),i,function(n){n&&t.applyParameters(n,r)},function(){t.afterClosing()}),!0},t.prototype.applyParameters=function(){return!1},t.prototype.afterClosing=function(){},t.prototype.getState=function(){return new r.SimpleCommandState(this.isEnabled())},t}(r.CommandBase);t.DialogBase=u;f=function(){function n(){}return n}();t.DialogParametersBase=f},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t,i,r){n===void 0&&(n=0);t===void 0&&(t=0);i===void 0&&(i=0);r===void 0&&(r=0);this._hour=0;this._min=0;this._sec=0;this._msec=0;this._fullmsec=0;this.hour=n;this.min=t;this.sec=i;this.msec=r}return Object.defineProperty(n.prototype,"hour",{get:function(){return this._hour},set:function(n){n>=0&&n<24&&(this._hour=n,this.updateFullMilleconds())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"min",{get:function(){return this._min},set:function(n){n>=0&&n<60&&(this._min=n,this.updateFullMilleconds())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sec",{get:function(){return this._sec},set:function(n){n>=0&&n<60&&(this._sec=n,this.updateFullMilleconds())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"msec",{get:function(){return this._msec},set:function(n){n>=0&&n<1e3&&(this._msec=n,this.updateFullMilleconds())},enumerable:!0,configurable:!0}),n.prototype.updateFullMilleconds=function(){var n=this._hour*60+this._min,t=n*60+this._sec;this._fullmsec=t*1e3+this._msec},n.prototype.getTimeInMilleconds=function(){return this._fullmsec},n}();t.Time=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),u=function(){function n(n,t){var i=r.DateTimeUtils.caclTimeDifference(n,t);i>=0?(this._start=n,this._end=t):(this._start=t,this._end=n)}return Object.defineProperty(n.prototype,"start",{get:function(){return this._start},set:function(n){n&&r.DateTimeUtils.caclTimeDifference(n,this._end)>=0&&(this._start=n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this._end},set:function(n){n&&r.DateTimeUtils.caclTimeDifference(this._start,n)>=0&&(this._end=n)},enumerable:!0,configurable:!0}),n.prototype.isTimeInRange=function(n){return r.DateTimeUtils.caclTimeDifference(this._start,n)>=0&&r.DateTimeUtils.caclTimeDifference(n,this._end)>=0},n.prototype.hasIntersect=function(n){return this.isTimeInRange(n.start)||this.isTimeInRange(n.end)||n.isTimeInRange(this.start)||n.isTimeInRange(this.end)},n.prototype.concatWith=function(n){return this.hasIntersect(n)?(this.start=r.DateTimeUtils.getMinTime(this.start,n.start),this.end=r.DateTimeUtils.getMaxTime(this.end,n.end),!0):!1},n}();t.TimeRange=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.First=0]="First";n[n.Second=1]="Second";n[n.Third=2]="Third";n[n.Forth=3]="Forth";n[n.Last=4]="Last"})(i=t.DayOfWeekMonthlyOccurrence||(t.DayOfWeekMonthlyOccurrence={}))},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),u=i(26),f=i(48),e=i(49),o=i(51),s=function(){function n(){}return n.createRecurrenceByType=function(n){if(!n)return null;var t=n.toLowerCase();switch(t){case"daily":return new u.Daily;case"weekly":return new f.Weekly;case"monthly":return new e.Monthly;case"yearly":return new o.Yearly}return null},n.createRecurrenceFromObject=function(n){if(!n)return null;var t=this.createRecurrenceByType(n.type);return t&&t.assignFromObject(n),t},n.getEnumValue=function(n,t){if(!r.JsonUtils.isExists(n[t]))return null;var i=parseInt(t);return isNaN(i)?n[t]:i},n}();t.RecurrenceFactory=s},function(n,t,i){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var f=i(11),r=i(2),e=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.checkDate=function(){return!0},t.prototype.checkInterval=function(n){return r.DateTimeUtils.getDaysBetween(this.start,n)%this.interval==0},t.prototype.calculatePointByInterval=function(n){var t=this.interval;return this.isRecurrencePoint(n)||(t-=r.DateTimeUtils.getDaysBetween(this.start,n)%this.interval),r.DateTimeUtils.addDays(n,t)},t.prototype.calculateNearestPoint=function(n){return r.DateTimeUtils.addDays(n,1)},t}(f.RecurrenceBase);t.Daily=e},function(n,t,i){"use strict";function o(){var n=new Map;return n.set(r.ViewType.TenMinutes,r.ViewType.Hours),n.set(r.ViewType.Hours,r.ViewType.Days),n.set(r.ViewType.SixHours,r.ViewType.Days),n.set(r.ViewType.Days,r.ViewType.Weeks),n.set(r.ViewType.Weeks,r.ViewType.Months),n.set(r.ViewType.Months,r.ViewType.Years),n.set(r.ViewType.Quarter,r.ViewType.Years),n.set(r.ViewType.Years,null),n}var f;Object.defineProperty(t,"__esModule",{value:!0});var r=i(7),e=i(1),u=function(){function n(){}return n.getDaysInMonth=function(n,t){var i=new Date(t,n+1,0);return i.getDate()},n.getOffsetInMonths=function(n,t){return(t.getFullYear()-n.getFullYear())*12+t.getMonth()-n.getMonth()},n.getOffsetInQuarters=function(n,t){return(t.getFullYear()-n.getFullYear())*4+Math.floor(t.getMonth()/3)-Math.floor(n.getMonth()/3)},n.getNearestScaleTickDate=function(n,t,i,r){var u=new Date,f=t.start.getTime(),s=t.end.getTime(),e,o;return u.setTime(n.getTime()),n.getTime()<f?u.setTime(f):n.getTime()>s?u.setTime(s):this.needCorrectDate(n,f,i,r)&&(e=this.getNearestLeftTickTime(n,f,i,r),o=this.getNextTickTime(e,i,r),Math.abs(n.getTime()-e)>Math.abs(n.getTime()-o)?u.setTime(o):u.setTime(e)),u},n.needCorrectDate=function(n,t,i,u){return u==r.ViewType.Months?n.getTime()!==new Date(n.getFullYear(),n.getMonth(),1).getTime():(n.getTime()-t)%i!=0},n.getNearestLeftTickTime=function(n,t,i,u){if(u==r.ViewType.Months)return new Date(n.getFullYear(),n.getMonth(),1).getTime();var f=Math.floor((n.getTime()-t)/i);return t+f*i},n.getNextTickTime=function(n,t,i){if(i==r.ViewType.Months){var u=new Date;return u.setTime(n),u.setMonth(u.getMonth()+1),u.getTime()}return n+t},n.adjustStartEndDateByViewType=function(n,t,i){var u=new Date;switch(i){case r.ViewType.TenMinutes:u=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours());n.getTime()===u.getTime()||t||(u=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours()+1));break;case r.ViewType.SixHours:case r.ViewType.Hours:u=new Date(n.getFullYear(),n.getMonth(),n.getDate());n.getTime()===u.getTime()||t||(u=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1));break;case r.ViewType.Days:case r.ViewType.Weeks:u=new Date(n.getFullYear(),n.getMonth(),n.getDate()-n.getDay());n.getTime()===u.getTime()||t||(u=new Date(n.getFullYear(),n.getMonth(),n.getDate()+7-n.getDay()));break;case r.ViewType.Months:case r.ViewType.Quarter:u=new Date(n.getFullYear(),0,1);n.getTime()===u.getTime()||t||(u=new Date(n.getFullYear()+1,0,1))}return u},n.getTickTimeSpan=function(t){switch(t){case r.ViewType.TenMinutes:return n.msPerHour/6;case r.ViewType.Hours:return n.msPerHour;case r.ViewType.SixHours:return n.msPerHour*6;case r.ViewType.Days:return n.msPerDay;case r.ViewType.Weeks:return n.msPerWeek;case r.ViewType.Months:return n.msPerMonth;case r.ViewType.Quarter:return n.msPerMonth*3}},n.msPerHour=36e5,n.msPerDay=24*n.msPerHour,n.msPerWeek=7*n.msPerDay,n.msPerMonth=30*n.msPerDay,n.ViewTypeToScaleMap=o(),n}();t.DateUtils=u;f=function(){function n(){this.longestAbbrMonthName=null;this.longestMonthName=null;this.longestAbbrDayName=null;var n=document.createElement("canvas");this.textMeasureContext=n.getContext("2d")}return n.prototype.setFont=function(n){var t=e.DomUtils.getCurrentStyle(n),i=t.font?t.font:t.fontStyle+" "+t.fontVariant+" "+t.fontWeight+" "+t.fontSize+" / "+t.lineHeight+" "+t.fontFamily;this.textMeasureContext.font=i},n.prototype.setSettings=function(n,t,i){this.startTime=n;this.viewType=t;this.modelItems=i},n.prototype.getScaleItemStartDate=function(n,t){var i=new Date(this.startTime);switch(t){case r.ViewType.TenMinutes:i.setTime(this.startTime+n*u.msPerHour/6);break;case r.ViewType.Hours:i.setTime(this.startTime+n*u.msPerHour);break;case r.ViewType.SixHours:i.setTime(this.startTime+n*u.msPerHour*6);break;case r.ViewType.Days:i.setTime(this.startTime+n*u.msPerDay);break;case r.ViewType.Weeks:i.setTime(this.startTime+n*u.msPerWeek);break;case r.ViewType.Months:i.setMonth(i.getMonth()+n);break;case r.ViewType.Quarter:i.setMonth(i.getMonth()+n*3);break;case r.ViewType.Years:i.setFullYear(i.getFullYear()+n)}return i},n.prototype.getScaleItemText=function(n,t){var i=this.getScaleItemStartDate(n,t),u=this.viewType.valueOf()==t.valueOf();switch(t){case r.ViewType.TenMinutes:return this.getTenMinutesScaleItemText(i);case r.ViewType.Hours:case r.ViewType.SixHours:return this.getHoursScaleItemText(i);case r.ViewType.Days:return this.getDaysScaleItemText(i,u);case r.ViewType.Weeks:return this.getWeeksScaleItemText(i,u);case r.ViewType.Months:return this.getMonthsScaleItemText(i,u);case r.ViewType.Quarter:return this.getQuarterScaleItemText(i,u);case r.ViewType.Years:return this.getYearsScaleItemText(i)}},n.prototype.getTenMinutesScaleItemText=function(n){var t=n.getMinutes()+1;return(Math.ceil(t/10)*10).toString()},n.prototype.getThirtyMinutesScaleItemText=function(n){var t=n.getMinutes();return t<30?"30":"60"},n.prototype.getHoursScaleItemText=function(n){var t=n.getHours(),i=this.getHourDisplayText(t),r=t<12?this.getAmText():this.getPmText();return this.getHoursScaleItemTextCore(i,r)},n.prototype.getDaysScaleItemText=function(n,t){return this.getDayTotalText(n,!0,t,t,!t)},n.prototype.getWeeksScaleItemText=function(n,t){var i=new Date(n.getTime()+u.msPerWeek-u.msPerDay);return this.getWeeksScaleItemTextCore(this.getDayTotalText(n,t,!0,t,!t),this.getDayTotalText(i,t,!0,t,!t))},n.prototype.getMonthsScaleItemText=function(n,t){var i=this.getMonthNames(),r=t?"":n.getFullYear().toString();return this.getMonthsScaleItemTextCore(i[n.getMonth()],r)},n.prototype.getQuarterScaleItemText=function(n,t){var i=this.getQuarterNames(),r=t?"":n.getFullYear().toString();return this.getMonthsScaleItemTextCore(i[Math.floor(n.getMonth()/3)],r)},n.prototype.getYearsScaleItemText=function(n){return n.getFullYear().toString()},n.prototype.getHourDisplayText=function(n){return this.hasAmPm()?(n==0?12:n<=12?n:n-12).toString():n<10?"0"+n:n.toString()},n.prototype.getDayTotalText=function(n,t,i,r,u){var f=r?this.getAbbrMonthNames():this.getMonthNames(),e=i?this.getAbbrDayNames():this.getDayNames(),o=t?e[n.getDay()]:"",s=n.getDate(),h=f[n.getMonth()],c=u?n.getFullYear().toString():"";return this.getDayTotalTextCore(o,s.toString(),h,c)},n.prototype.getTaskText=function(n){var t=this.modelItems[n];return t?t.task.title:""},n.prototype.getTaskVisibility=function(n){var t=this.modelItems[n];return!!t&&t.getVisible()},n.prototype.hasAmPm=function(){return this.getAmText().length>0||this.getPmText().length>0},n.prototype.getScaleItemTextTemplate=function(n){switch(n){case r.ViewType.TenMinutes:return"00";case r.ViewType.Hours:case r.ViewType.SixHours:return this.getHoursScaleItemTextCore("00",this.getAmText());case r.ViewType.Days:return this.getDayTextTemplate();case r.ViewType.Weeks:return this.getWeekTextTemplate();case r.ViewType.Months:return this.getMonthsScaleItemTextCore(this.getLongestMonthName(),"");case r.ViewType.Quarter:return"Q4"}},n.prototype.getDayTextTemplate=function(){return this.getDayTotalTextCore(this.getLongestAbbrDayName(),"00",this.getLongestAbbrMonthName(),"")},n.prototype.getWeekTextTemplate=function(){var n=this.getDayTextTemplate();return this.getWeeksScaleItemTextCore(n,n)},n.prototype.getHoursScaleItemTextCore=function(n,t){return n+":00"+(this.hasAmPm()?" "+t:"")},n.prototype.getDayTotalTextCore=function(n,t,i,r){var u=n.length>0?n+", ":"";return u+=t+" "+i,u+(r.length>0?" "+r:"")},n.prototype.getWeeksScaleItemTextCore=function(n,t){return n+" - "+t},n.prototype.getMonthsScaleItemTextCore=function(n,t){var i=n;return t.length>0&&(i+=" "+t),i},n.prototype.getLongestAbbrMonthName=function(){return this.longestAbbrMonthName==null&&(this.longestAbbrMonthName=this.getLongestText(this.getAbbrMonthNames())),this.longestAbbrMonthName},n.prototype.getLongestMonthName=function(){return this.longestMonthName==null&&(this.longestMonthName=this.getLongestText(this.getMonthNames())),this.longestMonthName},n.prototype.getLongestAbbrDayName=function(){return this.longestAbbrDayName==null&&(this.longestAbbrDayName=this.getLongestText(this.getAbbrDayNames())),this.longestAbbrDayName},n.prototype.getLongestText=function(n){var r=this,t="",i=0;return n.forEach(function(n){var u=r.getTextWidth(n);u>i&&(i=u,t=n)}),t},n.prototype.getTextWidth=function(n){return Math.round(this.textMeasureContext.measureText(n).width)},n.prototype.getAmText=function(){return"AM"},n.prototype.getPmText=function(){return"PM"},n.prototype.getQuarterNames=function(){return["Q1","Q2","Q3","Q4"]},n.prototype.getMonthNames=function(){return["January","February","March","April","May","June","July","August","September","October","November","December",""]},n.prototype.getDayNames=function(){return["Sunday","Monday","ASP","Wednesday","Thursday","Friday","Saturday"]},n.prototype.getAbbrMonthNames=function(){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},n.prototype.getAbbrDayNames=function(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},n}();t.ElementTextHelper=f},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),u=i(15),f=i(53),e=function(){function n(n,t,i){this.position=new r.Point;this.size=new u.Size;this.margins=new f.Margins;this.attr=new Map;n&&(this.className=n);t&&this.setPosition(t);i&&this.setSize(i)}return n.prototype.setSize=function(n){this.size.width=n.width;this.size.height=n.height},n.prototype.setPosition=function(n){this.position.x=n.x;this.position.y=n.y},n.prototype.assignToElement=function(n){this.assignPosition(n);this.assignSize(n);this.assignMargins(n);this.className&&(n.className=this.className)},n.prototype.assignPosition=function(n){this.position.x!=null&&(n.style.left=this.position.x+"px");this.position.y!=null&&(n.style.top=this.position.y+"px")},n.prototype.assignSize=function(n){this.size.width&&(n.style.width=this.size.width+"px");this.size.height&&(n.style.height=this.size.height+"px")},n.prototype.assignMargins=function(n){this.margins.marginLeft&&(n.style.marginLeft=this.margins.marginLeft+"px");this.margins.marginTop&&(n.style.marginTop=this.margins.marginTop+"px");this.margins.marginRight&&(n.style.marginRight=this.margins.marginRight+"px");this.margins.marginBottom&&(n.style.marginBottom=this.margins.marginBottom+"px")},n.prototype.setAttribute=function(n,t){this.attr.set(n,t)},n}();t.GridElementInfo=e},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(8),f=i(7),e=i(10),u=i(1),o=function(){function n(n){this.taskIndex=-1;this.successorIndex=-1;this.editing=!1;this.gantt=n;this.createElements();this.createclassToSourceMap()}return Object.defineProperty(n.prototype,"taskId",{get:function(){return this.gantt.viewModel.items[this.taskIndex].task.internalId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"successorId",{get:function(){return this.gantt.viewModel.items[this.successorIndex].task.internalId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"task",{get:function(){return this.gantt.viewModel.items[this.taskIndex].task},enumerable:!0,configurable:!0}),n.prototype.show=function(t){!this.editing&&this.gantt.settings.editing.enabled&&(this.taskIndex=t,this.updateWrapInfo(),this.wrapInfo.assignPosition(this.baseElement),this.wrapInfo.assignSize(this.baseElement),this.gantt.taskArea.appendChild(this.baseElement),this.baseElement.className=n.CLASSNAMES.TASK_EDIT_BOX,this.task.isMilestone()?this.baseElement.className=this.baseElement.className+" milestone":(this.gantt.settings.editing.allowDependencyAdding||(this.baseElement.className=this.baseElement.className+" hide-dependency"),this.gantt.settings.editing.allowTaskUpdating||(this.baseElement.className=this.baseElement.className+" hide-updating"),this.progressEdit.style.left=this.task.progress/100*this.wrapInfo.size.width-this.progressEdit.offsetWidth/2+"px"),this.taskDateRange=new e.DateRange(this.task.start,this.task.end))},n.prototype.updateWrapInfo=function(){this.wrapInfo=this.gantt.gridLayoutCalculator.getTaskWrapperElementInfo(this.taskIndex);this.wrapInfo.size.width=this.gantt.gridLayoutCalculator.getTaskWidth(this.taskIndex);this.wrapInfo.position.x--},n.prototype.hide=function(){var n=this.baseElement.parentNode;n&&n.removeChild(this.baseElement)},n.prototype.showDependencySuccessor=function(n){if(this.successorIndex!=n&&this.taskIndex!=n){this.successorIndex=n;var t=this.gantt.gridLayoutCalculator.getTaskWrapperElementInfo(n);t.size.width=this.gantt.gridLayoutCalculator.getTaskWidth(n)+1;t.assignPosition(this.dependencySuccessorBaseElement);t.assignSize(this.dependencySuccessorBaseElement);t.assignSize(this.dependencySuccessorFrame);this.gantt.taskArea.appendChild(this.dependencySuccessorBaseElement)}},n.prototype.hideDependencySuccessor=function(){var n=this.dependencySuccessorBaseElement.parentNode;n&&n.removeChild(this.dependencySuccessorBaseElement);this.successorIndex=-1},n.prototype.processProgress=function(n){this.editing=!0;var i=n.x-this.wrapInfo.position.x,t=0;n.x>this.wrapInfo.position.x&&(t=n.x<this.wrapInfo.position.x+this.wrapInfo.size.width?Math.round(i/this.baseElement.clientWidth*100):100);this.progressEdit.style.left=t/100*this.wrapInfo.size.width-this.progressEdit.offsetWidth/2+"px";this.statusMsg.innerHTML=t+"%";this.showMessageBox(u.DomUtils.getAbsolutePositionX(this.progressEdit)-this.statusMsg.clientWidth/2)},n.prototype.confirmProgress=function(){this.editing=!1;var n=Math.round((this.progressEdit.offsetLeft+this.progressEdit.offsetWidth/2)/this.wrapInfo.size.width*100);this.gantt.commandManager.changeTaskProgressCommand.execute(this.taskId,n)},n.prototype.isShouldProcessEnd=function(n){return n>this.wrapInfo.position.x-this.endEdit.clientWidth},n.prototype.processEnd=function(n){var f,t,i,r;this.baseElement.className=this.baseElement.className+" move";this.editing=!0;f=n.x>this.wrapInfo.position.x?n.x:this.wrapInfo.position.x;t=f-this.wrapInfo.position.x;this.baseElement.style.width=(t<1?0:t)+"px";i=this.task.start;r=this.gantt.gridLayoutCalculator.getDateByPos(f);r.setSeconds(0);r<i||t<1?this.taskDateRange.end.setTime(i.getTime()):this.taskDateRange.end=this.getNewDate(this.task.end,r);this.showTimeMessage(i,this.taskDateRange.end,u.DomUtils.getAbsolutePositionX(this.baseElement)+this.baseElement.clientWidth-this.statusMsg.clientWidth)},n.prototype.confirmEnd=function(){this.baseElement.className=n.CLASSNAMES.TASK_EDIT_BOX;this.editing=!1;this.gantt.commandManager.changeTaskEndCommand.execute(this.taskId,this.taskDateRange.end);this.updateWrapInfo()},n.prototype.processStart=function(n){var t,i,r,f;this.baseElement.className=this.baseElement.className+" move";this.editing=!0;t=n.x<this.wrapInfo.position.x+this.wrapInfo.size.width?n.x:this.wrapInfo.position.x+this.wrapInfo.size.width;i=this.wrapInfo.size.width-(t-this.wrapInfo.position.x);this.baseElement.style.left=t+"px";this.baseElement.style.width=(i<1?0:i)+"px";r=this.task.end;f=this.gantt.gridLayoutCalculator.getDateByPos(t);f.setSeconds(0);f>r||i<1?this.taskDateRange.start.setTime(r.getTime()):this.taskDateRange.start=this.getNewDate(this.task.start,f);this.showTimeMessage(this.taskDateRange.start,r,u.DomUtils.getAbsolutePositionX(this.baseElement))},n.prototype.confirmStart=function(){this.baseElement.className=n.CLASSNAMES.TASK_EDIT_BOX;this.editing=!1;this.gantt.commandManager.changeTaskStartCommand.execute(this.taskId,this.taskDateRange.start);this.updateWrapInfo()},n.prototype.processMove=function(n){var t,i,r,f;this.gantt.settings.editing.allowTaskUpdating&&(this.baseElement.className=this.baseElement.className+" move",this.editing=!0,t=this.baseElement.offsetLeft+n,this.baseElement.style.left=t+"px",i=this.gantt.gridLayoutCalculator.getDateByPos(t),this.taskDateRange.start=this.getNewDate(this.task.start,i),r=this.task.start.getTime()-i.getTime(),f=new Date(this.task.end.getTime()-r),this.taskDateRange.end=this.getNewDate(this.task.end,f),this.showTimeMessage(this.taskDateRange.start,this.taskDateRange.end,u.DomUtils.getAbsolutePositionX(this.baseElement)))},n.prototype.confirmMove=function(){this.baseElement.className=n.CLASSNAMES.TASK_EDIT_BOX;this.editing&&(this.gantt.history.beginTransaction(),this.gantt.commandManager.changeTaskStartCommand.execute(this.taskId,this.taskDateRange.start),this.gantt.commandManager.changeTaskEndCommand.execute(this.taskId,this.taskDateRange.end),this.gantt.history.endTransaction());this.updateWrapInfo();this.editing=!1},n.prototype.getNewDate=function(n,t){if(this.gantt.settings.viewType>f.ViewType.SixHours){var i=new Date(n.getTime());return i.setDate(t.getDate()),i.setMonth(t.getMonth()),i.setFullYear(t.getFullYear()),this.gantt.settings.viewType==f.ViewType.Days&&i.setHours(t.getHours()),i}return t},n.prototype.startDependency=function(t){this.dependencyLine=document.createElement("DIV");this.dependencyLine.className=n.CLASSNAMES.TASK_EDIT_DEPENDENCY_LINE;this.gantt.taskArea.appendChild(this.dependencyLine);this.startPosition=t},n.prototype.processDependency=function(n){this.editing=!0;this.drawline(this.startPosition,n)},n.prototype.endDependency=function(n){this.editing=!1;n!=null&&this.gantt.commandManager.createDependencyCommand.execute(this.task.internalId,this.successorId,n);var t=this.dependencyLine.parentNode;t&&t.removeChild(this.dependencyLine);this.dependencyLine=null;this.hideDependencySuccessor();this.hide()},n.prototype.selectDependency=function(n){this.gantt.settings.editing.allowDependencyDeleting&&(this.dependencyId=n)},n.prototype.isDependencySelected=function(n){return this.dependencyId&&this.dependencyId==n},n.prototype.deleteSelectedDependency=function(){this.dependencyId&&this.gantt.commandManager.removeDependencyCommand.execute(this.dependencyId)},n.prototype.showTimeMessage=function(t,i,r){var u,f,o,s,e,h,c;this.statusMsg.innerHTML="";u=document.createElement("DIV");u.className=n.CLASSNAMES.TASK_EDIT_PROGRESS_STATUS_TIME;f=document.createElement("DIV");o=document.createElement("SPAN");o.innerHTML="Start: ";s=document.createElement("SPAN");s.innerHTML=this.formatDate(t);f.appendChild(o);f.appendChild(s);e=document.createElement("DIV");h=document.createElement("SPAN");h.innerHTML="End: ";c=document.createElement("SPAN");c.innerHTML=this.formatDate(i);e.appendChild(h);e.appendChild(c);u.appendChild(f);u.appendChild(e);this.statusMsg.appendChild(u);this.showMessageBox(r)},n.prototype.showMessageBox=function(n){var t=this;this.statusMsg.style.display="block";this.statusMsg.style.left=n+"px";this.statusMsg.style.top=u.DomUtils.getAbsolutePositionY(this.baseElement)-this.statusMsg.clientHeight+"px";this.statusTimerId&&clearTimeout(this.statusTimerId);this.statusTimerId=setTimeout(function(){t.statusMsg.style.display="none"},1500)},n.prototype.formatDate=function(n){return("0"+n.getDate()).slice(-2)+"/"+("0"+(n.getMonth()+1)).slice(-2)+"/"+n.getFullYear()+" "+("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)},n.prototype.createElements=function(){this.baseElement=document.createElement("DIV");this.baseFrame=document.createElement("DIV");this.baseFrame.className=n.CLASSNAMES.TASK_EDIT_FRAME;this.baseElement.appendChild(this.baseFrame);this.progressEdit=document.createElement("DIV");this.progressEdit.className=n.CLASSNAMES.TASK_EDIT_PROGRESS;this.baseFrame.appendChild(this.progressEdit);this.statusMsg=document.createElement("DIV");this.statusMsg.className=n.CLASSNAMES.TASK_EDIT_PROGRESS_STATUS;this.baseFrame.appendChild(this.statusMsg);this.dependencyFinish=document.createElement("DIV");this.dependencyFinish.className=n.CLASSNAMES.TASK_EDIT_DEPENDENCY_RIGTH;this.baseFrame.appendChild(this.dependencyFinish);this.dependencyStart=document.createElement("DIV");this.dependencyStart.className=n.CLASSNAMES.TASK_EDIT_DEPENDENCY_LEFT;this.baseFrame.appendChild(this.dependencyStart);this.startEdit=document.createElement("DIV");this.startEdit.className=n.CLASSNAMES.TASK_EDIT_START;this.baseFrame.appendChild(this.startEdit);this.endEdit=document.createElement("DIV");this.endEdit.className=n.CLASSNAMES.TASK_EDIT_END;this.baseFrame.appendChild(this.endEdit);this.dependencySuccessorBaseElement=document.createElement("DIV");this.dependencySuccessorBaseElement.className=n.CLASSNAMES.TASK_EDIT_BOX_SUCCESSOR;this.dependencySuccessorFrame=document.createElement("DIV");this.dependencySuccessorFrame.className=n.CLASSNAMES.TASK_EDIT_FRAME_SUCCESSOR;this.dependencySuccessorBaseElement.appendChild(this.dependencySuccessorFrame);this.dependencySuccessorStart=document.createElement("DIV");this.dependencySuccessorStart.className=n.CLASSNAMES.TASK_EDIT_SUCCESSOR_DEPENDENCY_RIGTH;this.dependencySuccessorFrame.appendChild(this.dependencySuccessorStart);this.dependencySuccessorFinish=document.createElement("DIV");this.dependencySuccessorFinish.className=n.CLASSNAMES.TASK_EDIT_SUCCESSOR_DEPENDENCY_LEFT;this.dependencySuccessorFrame.appendChild(this.dependencySuccessorFinish);this.attachEvents()},n.prototype.attachEvents=function(){this.baseElement.addEventListener("mouseleave",function(){this.editing||this.hide()}.bind(this))},n.prototype.drawline=function(n,t){var r,i,u;n.x>t.x&&(r=t,t=n,n=r);i=Math.atan((n.y-t.y)/(t.x-n.x));i=i*180/Math.PI;i=-i;u=Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y));this.dependencyLine.style.left=n.x+"px";this.dependencyLine.style.top=n.y+"px";this.dependencyLine.style.width=u+"px";this.dependencyLine.style.transform="rotate("+i+"deg)"},n.prototype.createclassToSourceMap=function(){n.classToSource.set(n.CLASSNAMES.TASK_EDIT_PROGRESS,r.MouseEventSource.TaskEdit_Progress);n.classToSource.set(n.CLASSNAMES.TASK_EDIT_START,r.MouseEventSource.TaskEdit_Start);n.classToSource.set(n.CLASSNAMES.TASK_EDIT_END,r.MouseEventSource.TaskEdit_End);n.classToSource.set(n.CLASSNAMES.TASK_EDIT_FRAME,r.MouseEventSource.TaskEdit_Frame);n.classToSource.set(n.CLASSNAMES.TASK_EDIT_DEPENDENCY_RIGTH,r.MouseEventSource.TaskEdit_DependencyStart);n.classToSource.set(n.CLASSNAMES.TASK_EDIT_DEPENDENCY_LEFT,r.MouseEventSource.TaskEdit_DependencyFinish);n.classToSource.set(n.CLASSNAMES.TASK_EDIT_SUCCESSOR_DEPENDENCY_RIGTH,r.MouseEventSource.Successor_DependencyStart);n.classToSource.set(n.CLASSNAMES.TASK_EDIT_SUCCESSOR_DEPENDENCY_LEFT,r.MouseEventSource.Successor_DependencyFinish)},n.CLASSNAMES={TASK_EDIT_BOX:"dx-gantt-task-edit-wrapper",TASK_EDIT_FRAME:"dx-gantt-task-edit-frame",TASK_EDIT_PROGRESS:"dx-gantt-task-edit-progress",TASK_EDIT_PROGRESS_STATUS:"dx-gantt-task-edit-progress-status",TASK_EDIT_PROGRESS_STATUS_TIME:"dx-gantt-status-time",TASK_EDIT_DEPENDENCY_RIGTH:"dx-gantt-task-edit-dependency-r",TASK_EDIT_DEPENDENCY_LEFT:"dx-gantt-task-edit-dependency-l",TASK_EDIT_START:"dx-gantt-task-edit-start",TASK_EDIT_END:"dx-gantt-task-edit-end",TASK_EDIT_DEPENDENCY_LINE:"dx-gantt-task-edit-dependency-line",TASK_EDIT_BOX_SUCCESSOR:"dx-gantt-task-edit-wrapper-successor",TASK_EDIT_FRAME_SUCCESSOR:"dx-gantt-task-edit-frame-successor",TASK_EDIT_SUCCESSOR_DEPENDENCY_RIGTH:"dx-gantt-task-edit-successor-dependency-r",TASK_EDIT_SUCCESSOR_DEPENDENCY_LEFT:"dx-gantt-task-edit-successor-dependency-l"},n.classToSource=new Map,n}();t.TaskEditController=o},function(n,t,i){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),f,r,e,o,s,h,c;Object.defineProperty(t,"__esModule",{value:!0});f=i(9);r=function(n){function t(t,i,r){var u=n.call(this,t)||this;return u.taskId=i,u.newValue=r,u}return u(t,n),t.prototype.redo=function(){this.oldState=this.getPropertiesManipulator().setValue(this.taskId,this.newValue)},t.prototype.undo=function(){this.getPropertiesManipulator().restoreValue(this.oldState)},t.prototype.getPropertiesManipulator=function(){throw new Error("Not Implemented");},t}(f.HistoryItem);t.TaskPropertiesHistoryItemBase=r;e=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.getPropertiesManipulator=function(){return this.modelManipulator.task.properties.title},t}(r);t.TaskTitleHistoryItem=e;o=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.getPropertiesManipulator=function(){return this.modelManipulator.task.properties.description},t}(r);t.TaskDesriptionHistoryItem=o;s=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.getPropertiesManipulator=function(){return this.modelManipulator.task.properties.progress},t}(r);t.TaskProgressHistoryItem=s;h=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.getPropertiesManipulator=function(){return this.modelManipulator.task.properties.start},t}(r);t.TaskStartHistoryItem=h;c=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.getPropertiesManipulator=function(){return this.modelManipulator.task.properties.end},t}(r);t.TaskEndHistoryItem=c},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i(32);var r=i(33);t.GanttView=r.GanttView},function(){},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=i(34),r=i(7),f=i(27),e=i(1),s=i(10),o=i(15),h=i(3),u=i(28),l=i(54),a=i(55),v=i(29),y=i(8),p=i(56),w=i(61),b=i(62),k=i(72),d=i(73),g=i(74),nt=i(76),tt=i(86),it=i(12),rt=function(){function n(n,t,i){this.timeScaleAreas=[];this.horTaskAreaBorders=[];this.vertTaskAreaBorders=[];this.scaleBorders=[];this.scaleElements=[];this.taskElements=[];this.selectionElements=[];this.hlRowElements=[];this.renderedRowIndices=[];this.renderedColIndices=[];this.renderedScaleItemIndices=[];this.dependencyMap=[];this.renderedConnectorLines=[];this.connectorLinesToElementsMap=new Map;this.noWorkingIntervalsToElementsMap=new Map;this.renderedNoWorkingIntervals=[];this.gridLayoutCalculator=new l.GridLayoutCalculator;this.elementTextHelper=new f.ElementTextHelper;this.etalonSizeValues=new a.EtalonSizeValues;this.tickSize=new o.Size;this.scaleCount=2;this.isFocus=!1;this.zoom=1;this.currentSelectedTaskID="";this.ganttOwner=t;this.settings=d.Settings.parse(i);this.createMainElement(n);this.createHeader();this.createTaskAreaContainer();this.calculateEtalonSizeValues();this.loadOptionsFromGanttOwner();this.elementTextHelper.setFont(this.mainElement);this.setupHelpers();this.setSizeForTaskArea();this.createTimeScaleContainer();this.createTimeScaleAreas();this.commandManager=new nt.CommandManager(this);this.barManager=new tt.BarManager(this,t.bars);this.eventManager=new b.EventManager(this);this.taskEditController=new v.TaskEditController(this);this.history=new w.History;this.taskAreaManager=new y.TaskAreaManager(this);this.updateView()}return n.prototype.reset=function(){this.timeScaleContainer.innerHTML="";this.taskArea.innerHTML="";this.horTaskAreaBorders=[];this.vertTaskAreaBorders=[];this.scaleBorders=[];this.scaleElements=[];this.taskElements=[];this.selectionElements=[];this.hlRowElements=[];this.renderedRowIndices=[];this.renderedColIndices=[];this.renderedConnectorLines=[];this.timeScaleAreas=[];this.renderedScaleItemIndices=[];this.connectorLinesToElementsMap.clear();this.renderedNoWorkingIntervals=[];this.noWorkingIntervalsToElementsMap.clear()},n.prototype.setupHelpers=function(){var n=new o.Size(this.taskAreaContainer.getWidth(),this.taskAreaContainer.getHeight());this.gridLayoutCalculator.setSettings(n,this.tickSize,this.etalonSizeValues,this.range,this.viewModel,this.settings.viewType);this.elementTextHelper.setSettings(this.range.start.getTime(),this.settings.viewType,this.viewModel.items)},n.prototype.getDateRange=function(n,t){var r=f.DateUtils.adjustStartEndDateByViewType(n,!0,this.settings.viewType),i=this.adjustEndDateByVisibleAreaWidth(r,t);return i=f.DateUtils.adjustStartEndDateByViewType(i,!1,this.settings.viewType),new s.DateRange(r,i)},n.prototype.adjustEndDateByVisibleAreaWidth=function(n,t){var i=new Date,r=Math.max(t.getTime(),this.getVisibleAreaEndDate(n).getTime());return i.setTime(r),i},n.prototype.getVisibleAreaEndDate=function(n){var t=new Date,i=Math.ceil(this.taskAreaContainer.getWidth()/this.tickSize.width);return this.settings.viewType==r.ViewType.Months?(t.setTime(n.getTime()),t.setMonth(t.getMonth()+i)):t.setTime(n.getTime()+i*f.DateUtils.getTickTimeSpan(this.settings.viewType)),t},n.prototype.calculateEtalonSizeValues=function(){var n=this.createEtalonElementsContainer(),t=this.createEtalonElements(n);this.calculateEtalonSizeValuesCore(t);this.mainElement.removeChild(n)},n.prototype.calculateEtalonSizeValuesCore=function(n){this.etalonSizeValues.taskHeight=n[0].firstChild.offsetHeight;this.etalonSizeValues.milestoneWidth=n[1].firstChild.offsetWidth;this.etalonSizeValues.taskWrapperTopPadding=e.DomUtils.getTopPaddings(n[0]);this.etalonSizeValues.connectorLineThickness=e.DomUtils.getVerticalBordersWidth(n[2]);this.etalonSizeValues.connectorArrowWidth=e.DomUtils.getHorizontalBordersWidth(n[3]);this.etalonSizeValues.scaleItemHeight=n[4].offsetHeight;for(var t=0;t<=r.ViewType.Quarter;t++)n[4].innerText=this.elementTextHelper.getScaleItemTextTemplate(t),this.etalonSizeValues.scaleItemWidths.set(t,n[4].offsetWidth);this.etalonSizeValues.smallTaskWidth=e.DomUtils.getLeftPadding(n[0].firstChild.firstChild)*2;this.etalonSizeValues.outsideTaskTextDefaultWidth=e.DomUtils.pxToFloat(e.DomUtils.getCurrentStyle(n[5]).width)},n.prototype.createEtalonElementsContainer=function(){var n=document.createElement("DIV");return n.style.visibility="hidden",n.style.position="absolute",n.style.left="-1000px",this.mainElement.appendChild(n),n},n.prototype.createEtalonElements=function(n){var t=[],e=this.createElement(new u.GridElementInfo("dx-gantt-taskWrapper"),null,n),s=this.createElement(new u.GridElementInfo("dx-gantt-task"),null,e),h=this.createElement(new u.GridElementInfo("dx-gantt-taskTitle dx-gantt-titleIn"),null,s),r,f,i,o;for(h.innerText="WWW",t.push(e),r=this.createElement(new u.GridElementInfo("dx-gantt-taskWrapper"),null,n),this.createElement(new u.GridElementInfo("dx-gantt-task dx-gantt-milestone"),null,r),t.push(r),f=["dx-gantt-conn-h","dx-gantt-arrow","dx-gantt-si","dx-gantt-taskTitle dx-gantt-titleOut"],i=0;i<f.length;i++)o=new u.GridElementInfo(f[i]),t.push(this.createElement(o,null,n));return t},n.prototype.zoomIn=function(){this.zoom==1?(this.zoom++,this.updateTickSizeWidth(),this.resetAndUpdate()):this.settings.viewType>r.ViewType.TenMinutes&&(this.zoom--,this.setViewType(this.settings.viewType-1))},n.prototype.zoomOut=function(){this.zoom>1?(this.zoom--,this.updateTickSizeWidth(),this.resetAndUpdate()):this.settings.viewType<r.ViewType.Quarter&&(this.zoom++,this.setViewType(this.settings.viewType+1))},n.prototype.onVisualModelChanged=function(){this.resetAndUpdate()},n.prototype.getGanttViewStartDate=function(n){if(!n)return new Date;var t=n.map(function(n){return typeof n.start=="string"?new Date(n.start):n.start});return t.length>0?t.reduce(function(n,t){return t<n?t:n},t[0]):new Date},n.prototype.getGanttViewEndDate=function(n){if(!n)return new Date;var t=n.map(function(n){return typeof n.end=="string"?new Date(n.end):n.end});return t.length>0?t.reduce(function(n,t){return t>n?t:n},t[0]):new Date},n.prototype.getTaskAreaWidth=function(){return this.gridLayoutCalculator.horizontalTickCount*this.tickSize.width},n.prototype.getTaskAreaHeight=function(){return this.getVisibleTaskCount()*this.tickSize.height},n.prototype.getVisibleTaskCount=function(){return this.viewModel.itemCount},n.prototype.getTask=function(n){var t=this.viewModel.items[n];return t.task},n.prototype.createMainElement=function(n){this.mainElement=document.createElement("DIV");this.mainElement.style.width=n.offsetWidth+"px";this.mainElement.style.height=n.offsetHeight+"px";n.appendChild(this.mainElement)},n.prototype.createHeader=function(){this.header=document.createElement("DIV");this.header.className="dx-gantt-header";this.mainElement.appendChild(this.header)},n.prototype.createTimeScaleContainer=function(){this.timeScaleContainer=document.createElement("DIV");this.timeScaleContainer.className="dx-gantt-tsac";this.timeScaleContainer.style.height=this.etalonSizeValues.scaleItemHeight*this.scaleCount+"px";this.header.appendChild(this.timeScaleContainer)},n.prototype.createTimeScaleArea=function(){var n=document.createElement("DIV");return n.className="dx-gantt-tsa",n.style.width=this.getTaskAreaWidth()+"px",n.style.height=this.etalonSizeValues.scaleItemHeight+"px",this.timeScaleContainer.appendChild(n),this.timeScaleAreas.unshift(n),n},n.prototype.createTimeScaleAreas=function(){for(var t,n=0;n<this.scaleCount;n++)t=this.createTimeScaleArea(),n==0&&this.settings.viewType==r.ViewType.Weeks&&this.createMonthsScale(t)},n.prototype.createTaskAreaContainer=function(){var n=document.createElement("DIV");n.className="dx-gantt-tac";this.mainElement.appendChild(n);this.createTaskArea(n);this.taskAreaContainer=this.ganttOwner.getExternalTaskAreaContainer(n);this.taskAreaContainer==null&&(this.taskAreaContainer=new k.TaskAreaContainer(n,this));this.setClassesToTaskAreaContainer()},n.prototype.setClassesToTaskAreaContainer=function(){var n="dx-gantt-tac-hb",t=this.taskAreaContainer.getElement();this.settings.areHorizontalBordersEnabled?t.classList.add(n):t.classList.remove(n)},n.prototype.createTaskArea=function(n){this.taskArea=document.createElement("DIV");this.taskArea.id="dx-gantt-ta";n.appendChild(this.taskArea)},n.prototype.setSizeForTaskArea=function(){this.taskArea.style.width=this.getTaskAreaWidth()+"px";this.taskArea.style.height=this.getTaskAreaHeight()+"px"},n.prototype.updateTickSizeWidth=function(){this.tickSize.width=this.etalonSizeValues.scaleItemWidths.get(this.settings.viewType)*this.zoom},n.prototype.createMonthsScale=function(n){var t=new Date,i,e,l;for(t.setTime(this.range.start.getTime()),i=0,e=0;t.getTime()<this.range.end.getTime();){var a=f.DateUtils.getDaysInMonth(t.getMonth(),t.getFullYear()),v=a-t.getDate()+1,s=new Date;s.setTime(t.getTime()+Math.min(v*f.DateUtils.msPerDay,this.range.end.getTime()-t.getTime()));var c=this.gridLayoutCalculator.getWidthByDateRange(t,s),y=new u.GridElementInfo("dx-gantt-si",new h.Point(i),new o.Size(c)),p=this.createElement(y,null,n);p.innerText=this.elementTextHelper.getScaleItemText(e,r.ViewType.Months);l=new u.GridElementInfo("dx-gantt-vb",new h.Point(i+c),new o.Size(0,this.etalonSizeValues.scaleItemHeight));this.createElement(l,null,n);i+=c;e++;t=s}},n.prototype.updateView=function(){this.timeScaleContainer.scrollLeft=this.taskAreaContainer.scrollLeft;this.processScroll(!1);this.processScroll(!0);this.ganttOwner.onGanttScroll(this.taskAreaContainer.scrollTop)},n.prototype.processScroll=function(n){this.recreateTaskAreaBordersAndTaskElements(n);n?this.recreateConnectorLineElements():(this.recreateNoWorkingIntervalElements(),this.recreateScalesElements())},n.prototype.recreateTaskAreaBordersAndTaskElements=function(n){var i=this,r=n?this.taskAreaContainer.scrollTop:this.taskAreaContainer.scrollLeft,t=this.gridLayoutCalculator.getRenderedRowColumnIndices(r,n),u=n?this.renderedRowIndices:this.renderedColIndices;this.recreateElements(u,t,function(t){i.removeTaskAreaBorderAndTaskElement(t,n)},function(t){i.createTaskAreaBorderAndTaskElement(t,n)});n?this.renderedRowIndices=t:this.renderedColIndices=t},n.prototype.recreateNoWorkingIntervalElements=function(){var n=this,t=this.gridLayoutCalculator.getRenderedNoWorkingIntervals(this.taskAreaContainer.scrollLeft);this.recreateElements(this.renderedNoWorkingIntervals,t,function(t){n.removeNoWorkingIntervalElement(t)},function(t){n.createNoWorkingIntervalElement(t)});this.renderedNoWorkingIntervals=t},n.prototype.recreateConnectorLineElements=function(){var n=this,t=this.gridLayoutCalculator.getRenderedConnectorLines(this.taskAreaContainer.scrollTop);this.recreateElements(this.renderedConnectorLines,t,function(t){n.removeConnectorLineElement(t)},function(t){n.createConnectorLineElement(t)});this.renderedConnectorLines=t},n.prototype.recreateScalesElements=function(){this.recreateScaleElements(this.settings.viewType,0);this.settings.viewType!=r.ViewType.Weeks&&this.recreateScaleElements(f.DateUtils.ViewTypeToScaleMap.get(this.settings.viewType),1)},n.prototype.recreateScaleElements=function(n,t){var i=this,r=this.gridLayoutCalculator.getRenderedScaleItemIndices(n,this.renderedColIndices),u=this.renderedScaleItemIndices[n-this.settings.viewType]||[];this.recreateElements(u,r,function(n){i.removeScaleElementAndBorder(n,t)},function(r){i.createScaleElementAndBorder(r,t,n)});this.renderedScaleItemIndices[n-this.settings.viewType]=r},n.prototype.recreateElements=function(n,t,i,r){n.filter(function(n){return t.indexOf(n)===-1}).forEach(function(n){i(n)});t.filter(function(t){return n.indexOf(t)===-1}).forEach(function(n){r(n)})},n.prototype.allowTaskAreaBorders=function(n){return n?this.settings.areHorizontalBordersEnabled:this.settings.areVerticalBordersEnabled},n.prototype.createTaskAreaBorderAndTaskElement=function(n,t){this.allowTaskAreaBorders(t)&&this.createTaskAreaBorder(n,!t);t&&this.createTaskElement(n)},n.prototype.removeTaskAreaBorderAndTaskElement=function(n,t){this.allowTaskAreaBorders(t)&&this.removeTaskAreaBorder(n,!t);t&&this.removeTaskElement(n)},n.prototype.getTaskAreaBordersDictionary=function(n){return n?this.vertTaskAreaBorders:this.horTaskAreaBorders},n.prototype.createTaskAreaBorder=function(n,t){var i=this.gridLayoutCalculator.getTaskAreaBorderInfo(n,t);this.createElement(i,n,this.taskArea,this.getTaskAreaBordersDictionary(t))},n.prototype.removeTaskAreaBorder=function(n,t){this.removeElement(null,n,this.taskArea,this.getTaskAreaBordersDictionary(t))},n.prototype.createScaleElementAndBorder=function(n,t,i){this.createScaleElement(n,t,i);this.createScaleBorder(n,t,i)},n.prototype.createScaleElement=function(n,t,i){var r=this.gridLayoutCalculator.getScaleElementInfo(n,i),u=this.createScaleElementCore(n,r,t,this.scaleElements);u.innerText=this.elementTextHelper.getScaleItemText(n,i)},n.prototype.createScaleBorder=function(n,t,i){var r=this.gridLayoutCalculator.getScaleBorderInfo(n,i);this.createScaleElementCore(n,r,t,this.scaleBorders)},n.prototype.createScaleElementCore=function(n,t,i,r){return r[i]||(r[i]=[]),this.createElement(t,n,this.timeScaleAreas[i],r[i])},n.prototype.removeScaleElementAndBorder=function(n,t){this.removeElement(null,n,this.timeScaleAreas[t],this.scaleElements[t]);this.removeElement(null,n,this.timeScaleAreas[t],this.scaleBorders[t])},n.prototype.createTaskElement=function(n){this.createTaskWrapperElement(n);this.settings.taskTitlePosition==r.TaskTitlePosition.Outside&&this.createTaskTextElement(n,this.taskElements[n]);var t=this.createTaskVisualElement(n);this.viewModel.items[n].task.isMilestone()||(this.settings.taskTitlePosition==r.TaskTitlePosition.Inside&&this.createTaskTextElement(n,t),this.createTaskProgressElement(n,t));this.settings.showResources&&this.createResources(n);this.viewModel.items[n].selected&&this.createTaskSelectionElement(n);this.isHighlightRowElementAllowed(n)&&this.createHighlightRowElement(n)},n.prototype.isHighlightRowElementAllowed=function(n){return n%2!=0&&this.settings.areAlternateRowsEnabled||this.viewModel.items[n].children.length>0},n.prototype.createResources=function(n){for(var i=this.viewModel.items[n].resources.items,t=0;t<i.length;t++)this.createResourceElement(n,i[t])},n.prototype.createTaskWrapperElement=function(n){var t=this.gridLayoutCalculator.getTaskWrapperElementInfo(n);this.createElement(t,n,this.taskArea,this.taskElements);this.taskElements[n].style.display=this.elementTextHelper.getTaskVisibility(n)?"":"none"},n.prototype.createTaskVisualElement=function(n){var i=this.gridLayoutCalculator.getTaskElementInfo(n),t=this.createElement(i,n,this.taskElements[n]);return t.addEventListener("mouseenter",function(n){this.taskAreaManager.onTaskElementHover(n)}.bind(this)),t},n.prototype.createTaskProgressElement=function(n,t){var i=this.gridLayoutCalculator.getTaskProgressElementInfo(n);this.createElement(i,n,t)},n.prototype.createTaskTextElement=function(n,t){var i=this.gridLayoutCalculator.getTaskTextElementInfo(n,this.settings.taskTitlePosition==r.TaskTitlePosition.Inside),u=this.createElement(i,n,t);u.innerText=this.elementTextHelper.getTaskText(n)},n.prototype.createResourceElement=function(n,t){var i=this.gridLayoutCalculator.getTaskResourceElementInfo(),r=this.createElement(i,n,this.taskElements[n]);r.innerText=t.text},n.prototype.createTaskSelectionElement=function(n){var t=this.gridLayoutCalculator.getSelectionElementInfo(n);this.taskAreaContainer.isExternal&&!this.settings.areHorizontalBordersEnabled&&t.size.height++;this.createElement(t,n,this.taskArea,this.selectionElements)},n.prototype.createHighlightRowElement=function(n){var t=this.gridLayoutCalculator.getHighlightRowInfo(n);this.createElement(t,n,this.taskArea,this.hlRowElements)},n.prototype.removeTaskElement=function(n){this.removeElement(null,n,this.taskArea,this.taskElements);this.removeElement(null,n,this.taskArea,this.selectionElements);this.isHighlightRowElementAllowed(n)&&this.removeElement(null,n,this.taskArea,this.hlRowElements)},n.prototype.createConnectorLineElement=function(n){return this.taskEditController.isDependencySelected(n.attr.get("dependency-id"))&&(n.className=n.className+" active"),this.createElement(n,null,this.taskArea,this.connectorLinesToElementsMap)},n.prototype.removeConnectorLineElement=function(n){this.removeElement(n,null,this.taskArea,this.connectorLinesToElementsMap)},n.prototype.createNoWorkingIntervalElement=function(n){return this.createElement(n,null,this.taskArea,this.noWorkingIntervalsToElementsMap)},n.prototype.removeNoWorkingIntervalElement=function(n){this.removeElement(n,null,this.taskArea,this.noWorkingIntervalsToElementsMap)},n.prototype.createElement=function(n,t,i,r){var u=document.createElement("DIV");return n.assignToElement(u),i.appendChild(u),r&&r instanceof Array&&t!==null?r[t]=u:r&&r instanceof Map&&r.set(n,u),n.attr.forEach(function(n,t){u.setAttribute(t,n)}),u},n.prototype.removeElement=function(n,t,i,r){var u;r instanceof Array&&t!==null?(u=r[t],delete r[t]):r instanceof Map&&(u=r.get(n),r.delete(n));u&&i.removeChild(u)},n.prototype.calculateAutoViewType=function(n,t){var i=(t.getTime()-n.getTime())/36e5;return i>8760?r.ViewType.Years:i>720?r.ViewType.Months:i>168?r.ViewType.Weeks:i>24?r.ViewType.Days:i>6?r.ViewType.SixHours:i>1?r.ViewType.Hours:r.ViewType.TenMinutes},n.prototype.changeTaskExpanded=function(n,t){var i=this.getTaskByPublicId(n);i&&this.viewModel.changeTaskExpanded(i.internalId,t)},n.prototype.expandTask=function(n){this.viewModel.changeTaskExpanded(n,!0)},n.prototype.collapseTask=function(n){this.viewModel.changeTaskExpanded(n,!1)},n.prototype.showTask=function(n){this.viewModel.changeTaskVisibility(n,!0)},n.prototype.hideTask=function(n){this.viewModel.changeTaskVisibility(n,!1)},n.prototype.getTaskVisibility=function(n){return this.viewModel.getTaskVisibility(n)},n.prototype.unselectCurrentSelectedTask=function(){this.unselectTask(this.currentSelectedTaskID)},n.prototype.getTaskSelected=function(n){return this.viewModel.getTaskSelected(n)},n.prototype.setViewType=function(n){n==undefined&&(n=this.calculateAutoViewType(this.dataRange.start,this.dataRange.end));this.settings.viewType!==n&&(this.settings.viewType=n,this.updateTickSizeWidth(),this.resetAndUpdate())},n.prototype.setTaskTitlePosition=function(n){this.settings.taskTitlePosition!==n&&(this.settings.taskTitlePosition=n,this.resetAndUpdate())},n.prototype.setShowResources=function(n){this.settings.showResources!==n&&(this.settings.showResources=n,this.resetAndUpdate())},n.prototype.loadOptionsFromGanttOwner=function(){var n,t,i;this.tickSize.height=this.ganttOwner.getRowHeight();n=this.ganttOwner.getGanttTasksData();this.dataRange=new s.DateRange(this.getGanttViewStartDate(n),this.getGanttViewEndDate(n));this.settings.viewType==undefined&&(this.settings.viewType=this.calculateAutoViewType(this.dataRange.start,this.dataRange.end));this.updateTickSizeWidth();this.range=this.getDateRange(this.dataRange.start,this.dataRange.end);this.viewModel=new c.ViewVisualModel(this,n,this.ganttOwner.getGanttDependenciesData(),this.ganttOwner.getGanttResourcesData(),this.ganttOwner.getGanttResourceAssignmentsData(),this.range,this.ganttOwner.getGanttWorkTimeRules());t=new g.ModelChangesDispatcher;i=this.ganttOwner.getModelChangesListener();i&&t.onModelChanged.add(i);this.modelManipulator=new p.ModelManipulator(this.viewModel,t)},n.prototype.resetAndUpdate=function(){this.reset();this.range=this.getDateRange(this.dataRange.start,this.dataRange.end);this.setupHelpers();this.createTimeScaleAreas();this.setSizeForTaskArea();it.Browser.IE&&this.taskEditController.createElements();this.updateView()},n.prototype.selectTask=function(n){this.viewModel.changeTaskSelected(n,!0);this.currentSelectedTaskID=n},n.prototype.unselectTask=function(n){this.viewModel.changeTaskSelected(n,!1)},n.prototype.selectTaskById=function(n){this.unselectCurrentSelectedTask();var t=this.getTaskByPublicId(n);t&&this.selectTask(t.internalId)},n.prototype.getTaskAreaContainer=function(){return this.taskAreaContainer},n.prototype.setWidth=function(n){this.mainElement.style.width=n+"px"},n.prototype.setAllowSelection=function(n){this.settings.allowSelectTask=n},n.prototype.setEditingSettings=function(n){this.settings.editing=n},n.prototype.setRowLinesVisible=function(n){this.settings.areHorizontalBordersEnabled=n;this.setClassesToTaskAreaContainer();this.resetAndUpdate()},n.prototype.setTaskTitle=function(n,t){var i=this.getTaskByPublicId(n);i&&this.commandManager.changeTaskTitleCommand.execute(i.internalId,t)},n.prototype.setTaskProgress=function(n,t){var i=this.getTaskByPublicId(n);i&&this.commandManager.changeTaskProgressCommand.execute(i.internalId,t)},n.prototype.setTaskStart=function(n,t){var i=this.getTaskByPublicId(n);i&&this.commandManager.changeTaskStartCommand.execute(i.internalId,t)},n.prototype.setTaskEnd=function(n,t){var i=this.getTaskByPublicId(n);i&&this.commandManager.changeTaskEndCommand.execute(i.internalId,t)},n.prototype.removeTask=function(n){var t=this.getTaskByPublicId(n);t&&this.commandManager.removeTaskCommand.execute(t.internalId)},n.prototype.createTask=function(n){var t=this.getTaskByPublicId(n),i=t?t.internalId:null;this.commandManager.createTaskCommand.execute(null,null,"",i)},n.prototype.getTaskByPublicId=function(n){return this.viewModel.tasks.getItemByPublicId(n)},n.prototype.getPrevTask=function(n){var t=this.viewModel.findItem(n),i=t.parent.children.indexOf(t)-1;return i>-1?t.parent.children[i].task:t.parent.task},n.prototype.updateCreatedTaskIdAfterServerUpdate=function(n,t){var i=this.viewModel.findItem(n),r=i&&i.task;r&&(r.id=t)},n.prototype.getTaskIdByInternalId=function(n){var t=this.viewModel.findItem(n),i=t&&t.task;return i?i.id:null},n.prototype.isTaskHasChildren=function(n){var t=this.viewModel.findItem(n);return t&&t.children.length>0},n}();t.GanttView=rt},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(13),f=i(36),e=i(38),o=i(39),u=i(41),s=i(42),h=i(43),c=function(){function n(n,t,i,u,s,c,l){this._fLockCount=0;this.owner=n;this.tasks=new f.TaskCollection;this.tasks.importFromObject(t);this.dependencies=new e.DependencyCollection;this.dependencies.importFromObject(i);this.resources=new r.ResourceCollection;this.resources.importFromObject(u);this.assignments=new o.ResourceAssignmentCollection;this.assignments.importFromObject(s);this._itemList=[];this._viewItemList=[];this._workTimeCalculator=new h.WorkingTimeCalculator(c,l);this.updateModel()}return n.prototype.updateModel=function(){var i,n,t;for(this._itemList.splice(0,this._itemList.length),i=this.tasks.items,n=0;n<i.length;n++)t=i[n],t&&this._itemList.push(new u.ViewVisualModelItem(t,this.getAssignedResources(t)));this.createHierarchy();this.populateItemsForView();this.owner&&this.owner.currentSelectedTaskID&&this.changeTaskSelected(this.owner.currentSelectedTaskID,!0)},n.prototype.createHierarchy=function(){var n;this.root=new u.ViewVisualModelItem(null,null);var t=this._itemList,i=function(){var i=t[n],u=i.task.parentId,f=t.filter(function(n){return n.task&&n.task.internalId===u||n.task.internalId.toString()===u})[0]||r.root;i.parent=f;f.addChild(i)},r=this;for(n=0;n<t.length;n++)i()},n.prototype.populateItemsForView=function(){this._viewItemList.splice(0,this._viewItemList.length);this.populateVisibleItems(this.root);this.updateVisibleItemDependencies()},n.prototype.populateVisibleItems=function(n){var i=this,t=n===this.root;n&&(n.task||t)&&(t||(this._viewItemList.push(n),n.visibleIndex=this._viewItemList.length-1),(n.getExpanded()||n===this.root)&&n.children.forEach(function(n){return i.populateVisibleItems(n)}))},n.prototype.updateVisibleItemDependencies=function(){for(var t,r,i=this._viewItemList,n=0;n<i.length;n++)t=i[n],r=this.getTasVisibleDependencies(t.task),t.setDependencies(r)},n.prototype.getAssignedResources=function(n){var i=this,t=new r.ResourceCollection,u=this.assignments.items.filter(function(t){return t.taskId==n.internalId});return u.forEach(function(n){t.add(i.resources.getItemById(n.resourceId))}),t},n.prototype.getTasVisibleDependencies=function(n){for(var t,i,u=[],e=n.internalId,f=this.dependencies.items.filter(function(n){return n.successorId==e}),r=0;r<f.length;r++)t=f[r],i=this.findItem(t.predecessorId),i&&i.getVisible()&&u.push(new s.ViewVisualModelDependencyInfo(t.internalId,i,t.type));return u},n.prototype.changeTaskExpanded=function(n,t){var i=this.tasks.getItemById(String(n));i&&(i.expanded=t,this.changed())},n.prototype.changeTaskVisibility=function(n,t){var i=this.findItem(n);i&&(i.visible=t,this.changed())},n.prototype.changeTaskSelected=function(n,t){var i=this.findItem(String(n));i&&(i.selected=t,this.changed())},n.prototype.beginUpdate=function(){this._fLockCount++},n.prototype.endUpdate=function(){this._fLockCount--;this._fLockCount==0&&this.changed()},n.prototype.changed=function(){this._fLockCount===0&&(this.populateItemsForView(),this.owner&&this.owner.onVisualModelChanged&&this.owner.onVisualModelChanged())},n.prototype.findItem=function(n){return this._itemList.filter(function(t){return t.task&&t.task.internalId===n})[0]},Object.defineProperty(n.prototype,"items",{get:function(){return this._viewItemList.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemCount",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),n.prototype.getTaskVisibility=function(n){var t=this.findItem(n);return!!t&&t.getVisible()},n.prototype.getTaskSelected=function(n){var t=this.findItem(n);return!!t&&t.selected},Object.defineProperty(n.prototype,"noWorkingIntervals",{get:function(){return this._workTimeCalculator.noWorkingIntervals},enumerable:!0,configurable:!0}),n.prototype.updateRange=function(n){this._workTimeCalculator.updateRange(n)},n}();t.ViewVisualModel=c},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=i(0),f=i(4),e=function(n){function t(){var t=n.call(this)||this;return t.text="",t}return r(t,n),t.prototype.assignFromObject=function(t){u.JsonUtils.isExists(t)&&(n.prototype.assignFromObject.call(this,t),this.text=t.text)},t}(f.DataObject);t.Resource=e},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=i(37),f=i(6),e=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.createItem=function(){return new u.Task},t}(f.CollectionBase);t.TaskCollection=e},function(n,t,i){"use strict";var o=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u,f,e;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=i(4),function(n){n[n.Regular=0]="Regular";n[n.Summary=1]="Summary";n[n.Milestone=2]="Milestone"}(f||(f={}));e=function(n){function t(){var t=n.call(this)||this;return t.start=null,t.end=null,t.duration=null,t.description="",t.parentId="",t.title="",t.owner=null,t.progress=0,t.taskType=null,t.customFields={},t.expanded=!0,t}return o(t,n),t.prototype.assignFromObject=function(t){r.JsonUtils.isExists(t)&&(n.prototype.assignFromObject.call(this,t),this.owner=t.owner,this.parentId=t.parentId!=null?String(t.parentId):null,this.description=t.description,this.title=t.title,this.start=t.start,this.end=t.end,this.start=typeof t.start=="string"?new Date(t.start):t.start,this.end=typeof t.end=="string"?new Date(t.end):t.end,this.duration=t.duration,this.progress=t.progress,this.taskType=t.taskType,r.JsonUtils.isExists(t.expanded)&&(this.expanded=!!t.expanded),this.assignCustomFields(t.customFields))},t.prototype.assignCustomFields=function(n){if(n)for(var t in n)n.hasOwnProperty(t)&&(this.customFields[t]=n[t])},t.prototype.isMilestone=function(){return this.start.getTime()==this.end.getTime()},t}(u.DataObject);t.Task=e},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=i(6),f=i(14),e=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.createItem=function(){return new f.Dependency},t}(u.CollectionBase);t.DependencyCollection=e},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=i(6),f=i(40),e=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.createItem=function(){return new f.ResourceAssignment},t}(u.CollectionBase);t.ResourceAssignmentCollection=e},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=i(4),f=i(0),e=function(n){function t(){var t=n.call(this)||this;return t.taskId="",t.resourceId="",t}return r(t,n),t.prototype.assignFromObject=function(t){f.JsonUtils.isExists(t)&&(n.prototype.assignFromObject.call(this,t),this.taskId=String(t.taskId),this.resourceId=String(t.resourceId))},t}(u.DataObject);t.ResourceAssignment=e},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),u=function(){function n(n,t){this.dependencies=[];this.parent=null;this.visible=!0;this.selected=!1;this.visibleIndex=-1;this.task=n;this.resources=t;this.children=[]}return Object.defineProperty(n.prototype,"resourceText",{get:function(){var n="";return this.resources.items.forEach(function(t){return n+=t.text+" "}),n},enumerable:!0,configurable:!0}),n.prototype.addChild=function(n){r.JsonUtils.isExists(n)&&this.children.indexOf(n)<0&&this.children.push(n)},n.prototype.removeChild=function(n){var t=this.children.indexOf(n);t>-1&&this.children.splice(t,1)},n.prototype.getExpanded=function(){return!!this.task&&this.task.expanded},n.prototype.getVisible=function(){if(!this.visible)return!1;for(var n=this.parent;n;){if(!n.visible)return!1;n=n.parent}return!0},n.prototype.changeVisibility=function(n){this.visible=n},n.prototype.changeSelection=function(n){this.selected=n},n.prototype.setDependencies=function(n){n&&(this.dependencies=n.slice())},n}();t.ViewVisualModelItem=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t,i){this.id=n;this.predecessor=t;this.type=i}return n}();t.ViewVisualModelDependencyInfo=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=i(44),f=i(52),r=i(2),e=function(){function n(n,t){this._workingRules=new u.WorkingDayRuleCollection;this._workDayList=[];this._calculationRange=n;this._workingRules.importFromObject(t)}return n.prototype.calculateWorkDayList=function(){var t,n;if(this._calculationRange){for(this.clearList(),t=this._workingRules.items,n=0;n<t.length;n++)this.processRule(t[n]);this.sortList()}},n.prototype.processRule=function(n){for(var i=n.recurrence.calculatePoints(this._calculationRange.start,this._calculationRange.end),e=function(t){var s=i[t],o=r.DateTimeUtils.getDayNumber(s),e=u._workDayList.filter(function(n){return n.dayNumber==o})[0];e?(e.isWorkDay=e.isWorkDay&&n.isWorkDay,e.addWorkingIntervals(n.workTimeRanges)):u._workDayList.push(new f.DayWorkingTimeInfo(o,n.isWorkDay,n.workTimeRanges))},u=this,t=0;t<i.length;t++)e(t)},n.prototype.sortList=function(){this._workDayList.sort(function(n,t){return n.dayNumber-t.dayNumber})},n.prototype.clearList=function(){this._workDayList.splice(0,this._workDayList.length)},n.prototype.calculateNoWorkTimeIntervals=function(){var t=this,n=[];return this._workDayList.length==0&&this.calculateWorkDayList(),this._workDayList.forEach(function(i){return n=n.concat(t.getNoWorkTimeRangesFromDay(i))}),this.concatJointedRanges(n)},n.prototype.concatJointedRanges=function(n){for(var i,f,t=[],u=0;u<n.length;u++)i=n[u],f=t.length>0&&r.DateTimeUtils.compareDates(t[t.length-1].end,i.start)<2,f?t[t.length-1].end=i.end:t.push(i);return t},n.prototype.getNoWorkTimeRangesFromDay=function(n){return n.noWorkingIntervals.map(function(t){return r.DateTimeUtils.convertTimeRangeToDateRange(t,n.dayNumber)})},Object.defineProperty(n.prototype,"noWorkingIntervals",{get:function(){return this._noWorkingIntervals||(this._noWorkingIntervals=this.calculateNoWorkTimeIntervals()),this._noWorkingIntervals.slice()},enumerable:!0,configurable:!0}),n.prototype.updateRange=function(n){this._calculationRange=n;this.invalidate()},n.prototype.invalidate=function(){this._noWorkingIntervals=null;this.clearList()},n}();t.WorkingTimeCalculator=e},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=i(6),f=i(45),e=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.createItem=function(){return new f.WorkingTimeRule},t}(u.CollectionBase);t.WorkingDayRuleCollection=e},function(n,t,i){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var f=i(4),r=i(0),e=i(2),o=i(25),s=i(26),h=function(n){function t(t,i,r){t===void 0&&(t=null);i===void 0&&(i=!0);r===void 0&&(r=null);var u=n.call(this)||this;return u.isWorkDay=!0,u.workTimeRanges=[],u.recurrence=t,u.isWorkDay=i,r&&u.workTimeRanges.concat(r),u}return u(t,n),t.prototype.assignFromObject=function(t){if(r.JsonUtils.isExists(t)){n.prototype.assignFromObject.call(this,t);this.recurrence=o.RecurrenceFactory.createRecurrenceByType(t.recurrenceType)||new s.Daily;r.JsonUtils.isExists(t.recurrence)&&this.recurrence.assignFromObject(t.recurrence);r.JsonUtils.isExists(t.isWorkDay)&&(this.isWorkDay=!!t.isWorkDay);var i=e.DateTimeUtils.convertToTimeRanges(t.workTimeRanges);i&&(this.workTimeRanges=i)}},t}(f.DataObject);t.WorkingTimeRule=h},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.Sunday=0]="Sunday";n[n.Monday=1]="Monday";n[n.Tuesday=2]="Tuesday";n[n.Wednesday=3]="Wednesday";n[n.Thursday=4]="Thursday";n[n.Friday=5]="Friday";n[n.Saturday=6]="Saturday"})(i=t.DayOfWeek||(t.DayOfWeek={}))},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.January=0]="January";n[n.February=1]="February";n[n.March=2]="March";n[n.April=3]="April";n[n.May=4]="May";n[n.June=5]="June";n[n.July=6]="July";n[n.August=7]="August";n[n.September=8]="September";n[n.October=9]="October";n[n.November=10]="November";n[n.December=11]="December"})(i=t.Month||(t.Month={}))},function(n,t,i){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var f=i(11),r=i(2),e=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.checkDate=function(n){return r.DateTimeUtils.checkDayOfWeek(this.dayOfWeekInternal,n)},t.prototype.checkInterval=function(n){return r.DateTimeUtils.getWeeksBetween(this.start,n)%this.interval==0},t.prototype.calculatePointByInterval=function(n){var t=r.DateTimeUtils.getWeeksBetween(this.start,n),i=Math.floor(t/this.interval),f=t%this.interval,e=f>0||n.getDay()>=this.dayOfWeekInternal,u;return e&&i++,u=i*this.interval,this.calcNextPointWithWeekCount(this.start,u)},t.prototype.calculateNearestPoint=function(n){var t=this.dayOfWeekInternal-n.getDay();return t>0?r.DateTimeUtils.addDays(new Date(n),t):this.calcNextPointWithWeekCount(n,1)},t.prototype.calcNextPointWithWeekCount=function(n,t){t===void 0&&(t=1);var i=t*7+this.dayOfWeekInternal-n.getDay();return r.DateTimeUtils.addDays(new Date(n),i)},Object.defineProperty(t.prototype,"dayOfWeek",{get:function(){return this.dayOfWeekInternal},set:function(n){this.dayOfWeekInternal=n},enumerable:!0,configurable:!0}),t}(f.RecurrenceBase);t.Weekly=e},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var e=i(11),r=i(2),u=i(50),o=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return f(t,n),t.prototype.checkDate=function(n){return this._calculateByDayOfWeek?r.DateTimeUtils.checkDayOfWeekOccurrenceInMonth(n,this.dayOfWeekInternal,this.dayOfWeekOccurrenceInternal):r.DateTimeUtils.checkDayOfMonth(this.dayInternal,n)},t.prototype.checkInterval=function(n){return r.DateTimeUtils.getMonthsDifference(this.start,n)%this.interval==0},t.prototype.calculatePointByInterval=function(n){var f=this.start,e=r.DateTimeUtils.getMonthsDifference(f,n),o=Math.floor(e/this.interval)*this.interval,t=new u.MonthInfo(f.getMonth(),f.getFullYear()),i;return t.addMonths(o),i=this.getSpecDayInMonth(t.year,t.month),r.DateTimeUtils.compareDates(i,n)>=0&&(t.addMonths(this.interval),i=this.getSpecDayInMonth(t.year,t.month)),i},t.prototype.calculateNearestPoint=function(n){var f=n.getMonth(),e=n.getFullYear(),i=this.getSpecDayInMonth(e,f),t;return r.DateTimeUtils.compareDates(i,n)>=0&&(t=new u.MonthInfo(f,e),t.addMonths(1),i=this.getSpecDayInMonth(t.year,t.month)),i},Object.defineProperty(t.prototype,"day",{get:function(){return this.dayInternal},set:function(n){this.dayInternal=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dayOfWeek",{get:function(){return this.dayOfWeekInternal},set:function(n){this.dayOfWeekInternal=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dayOfWeekOccurrence",{get:function(){return this.dayOfWeekOccurrenceInternal},set:function(n){this.dayOfWeekOccurrenceInternal=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"calculateByDayOfWeek",{get:function(){return this._calculateByDayOfWeek},set:function(n){this._calculateByDayOfWeek=n},enumerable:!0,configurable:!0}),t}(e.RecurrenceBase);t.Monthly=o},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),u=function(){function n(n,t){this.month=n;this.year=t}return n.prototype.addMonths=function(n){var t=r.DateTimeUtils.getNextMonth(this.month,n),i=Math.floor(n/12);t<this.month&&++i;this.month=t;this.year+=i},n}();t.MonthInfo=u},function(n,t,i){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var f=i(11),r=i(2),e=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.checkDate=function(n){return r.DateTimeUtils.checkMonth(this.month,n)?this._calculateByDayOfWeek?r.DateTimeUtils.checkDayOfWeekOccurrenceInMonth(n,this.dayOfWeekInternal,this.dayOfWeekOccurrenceInternal):r.DateTimeUtils.checkDayOfMonth(this.dayInternal,n):!1},t.prototype.checkInterval=function(n){return r.DateTimeUtils.getYearsDifference(this.start,n)%this.interval==0},t.prototype.calculatePointByInterval=function(n){var u=r.DateTimeUtils.getYearsDifference(this.start,n),f=Math.floor(u/this.interval)*this.interval,t=this.start.getFullYear()+f,i=this.getSpecDayInMonth(t,this.monthInternal);return r.DateTimeUtils.compareDates(i,n)>=0&&(t+=this.interval,i=this.getSpecDayInMonth(t,this.monthInternal)),i},t.prototype.calculateNearestPoint=function(n){var i=n.getFullYear(),t=this.getSpecDayInMonth(i,this.monthInternal);return r.DateTimeUtils.compareDates(t,n)>=0&&(t=this.getSpecDayInMonth(++i,this.monthInternal)),t},Object.defineProperty(t.prototype,"month",{get:function(){return this.monthInternal},set:function(n){this.monthInternal=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"day",{get:function(){return this.dayInternal},set:function(n){this.dayInternal=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dayOfWeek",{get:function(){return this.dayOfWeekInternal},set:function(n){this.dayOfWeekInternal=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dayOfWeekOccurrence",{get:function(){return this.dayOfWeekOccurrenceInternal},set:function(n){this.dayOfWeekOccurrenceInternal=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"calculateByDayOfWeek",{get:function(){return this._calculateByDayOfWeek},set:function(n){this._calculateByDayOfWeek=n},enumerable:!0,configurable:!0}),t}(f.RecurrenceBase);t.Yearly=e},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=i(23),r=i(2),f=i(22),e=function(){function n(n,t,i){n===void 0&&(n=0);t===void 0&&(t=!0);i===void 0&&(i=null);this._workingIntervals=[];this.dayNumber=n;this.isWorkDay=t;this.addWorkingIntervals(i)}return n.prototype.addWorkingIntervals=function(n){n&&(this._workingIntervals=this._workingIntervals.concat(n.filter(function(n){return!!n})),this.rearrangeWorkingIntervals())},n.prototype.rearrangeWorkingIntervals=function(){for(var n=0;n<this._workingIntervals.length;n++)this.concatWithIntersectedRanges(this._workingIntervals[n]);this.sortIntervals()},n.prototype.concatWithIntersectedRanges=function(n){var t=this,i=this.getIntersectedIntervals(n);i.forEach(function(i){n.concatWith(i);t.removeInterval(i)})},n.prototype.getIntersectedIntervals=function(n){return this._workingIntervals.filter(function(t){return t.hasIntersect(n)&&t!==n})},n.prototype.sortIntervals=function(){this._workingIntervals.sort(function(n,t){return r.DateTimeUtils.caclTimeDifference(t.start,n.start)})},n.prototype.removeInterval=function(n){var t=this._workingIntervals.indexOf(n);t>-1&&t<this._workingIntervals.length&&this._workingIntervals.splice(t,1)},n.prototype.clearIntervals=function(){this._workingIntervals.splice(0,this._workingIntervals.length)},Object.defineProperty(n.prototype,"workingIntervals",{get:function(){return this._workingIntervals.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"noWorkingIntervals",{get:function(){var i=[],t,e,n,o,s;if(this.isWorkDay&&this._workingIntervals.length==0)return i;for(t=this._workingIntervals.map(function(n){return n.end}),t.splice(0,0,new f.Time),e=this._workingIntervals.map(function(n){return n.start}),e.push(r.DateTimeUtils.getLastTimeOfDay()),n=0;n<t.length;n++)o=t[n],s=e[n],r.DateTimeUtils.areTimesEqual(o,s)||i.push(new u.TimeRange(o,s));return i},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isWorkDay",{get:function(){return this._isWorkDay},set:function(n){this._isWorkDay=n;n||this.clearIntervals()},enumerable:!0,configurable:!0}),n}();t.DayWorkingTimeInfo=e},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){this.marginLeft=null;this.marginTop=null;this.marginRight=null;this.marginBottom=null}return n}();t.Margins=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=i(15),h=i(10),u=i(7),f=i(28),o=i(27),r=i(3),s=i(14),c=function(){function n(){this.tileToDependencyMap=[];this.tileToNoWorkingIntervalsMap=[];this.minLineLength=10;this.resourceMaxWidth=500;this.minTaskWidth=2}return n.prototype.setSettings=function(n,t,i,r,u,f){this.visibleTaskAreaSize=n;this.tickSize=t;this.viewType=f;this.range=r;this.verticalTickCount=u.itemCount;this.viewModel=u;this.elementSizeValues=i;this.taskHeight=i.taskHeight;this.milestoneWidth=i.milestoneWidth;this.scaleHeight=i.scaleItemHeight;this.arrowSize=new e.Size(i.connectorArrowWidth,i.connectorArrowWidth);this.lineThickness=i.connectorLineThickness;this.minConnectorSpaceFromTask=(this.tickSize.height-this.taskHeight)/2;this.tickTimeSpan=o.DateUtils.getTickTimeSpan(f);this.horizontalTickCount=this.getTotalTickCount();this.createTileToConnectorLinesMap();this.createTileToNonWorkingIntervalsMap()},n.prototype.getTaskAreaBorderInfo=function(n,t){var i=t?this.tickSize.height*this.verticalTickCount:this.tickSize.width*this.horizontalTickCount;return this.getGridBorderInfo(n,t,i)},n.prototype.getScaleBorderInfo=function(n,t){var i=this.getGridBorderInfo(n,!0);return i.position.x*=this.getScaleItemColSpan(t),i},n.prototype.getGridBorderInfo=function(n,t,i){var r=new f.GridElementInfo;return r.setPosition(this.getGridBorderPosition(n,t)),i&&r.setSize(this.getGridBorderSize(t,i)),r.className=t?"dx-gantt-vb":"dx-gantt-hb",r},n.prototype.getGridBorderPosition=function(n,t){var i=new r.Point,u=(n+1)*(t?this.tickSize.width:this.tickSize.height);return t?i.x=u:i.y=u,i},n.prototype.getGridBorderSize=function(n,t){var i=new e.Size;return n?i.height=t:i.width=t,i},n.prototype.getScaleElementInfo=function(n,t){var i=new f.GridElementInfo;return i.setPosition(this.getScaleItemPosition(n,t)),i.setSize(this.getScaleItemSize(t)),i.className=this.getScaleItemClassName(t,i,this.getRenderedNoWorkingIntervals(i.position.x)),i},n.prototype.getScaleItemClassName=function(n,t,i){var r="dx-gantt-si";return n.valueOf()==this.viewType.valueOf()&&this.isScaleItemInsideNoWorkingInterval(t,i)&&(r+=" dx-gantt-holiday-scaleItem"),r},n.prototype.isScaleItemInsideNoWorkingInterval=function(n,t){for(var r,u,f=n.position.x,e=n.position.x+n.size.width,i=0;i<t.length;i++)if(r=t[i].position.x,u=t[i].position.x+t[i].size.width,f>=r&&e<=u)return!0;return!1},n.prototype.getScaleItemPosition=function(n,t){return new r.Point(n*this.tickSize.width*this.getScaleItemColSpan(t))},n.prototype.getScaleItemSize=function(n){return new e.Size(this.tickSize.width*this.getScaleItemColSpan(n))},n.prototype.getScaleItemColSpan=function(n){return n.valueOf()==this.viewType.valueOf()?1:this.viewType==u.ViewType.TenMinutes?6:this.viewType==u.ViewType.Hours?24:this.viewType==u.ViewType.SixHours?4:this.viewType==u.ViewType.Days?7:this.viewType==u.ViewType.Weeks?4.29:this.viewType==u.ViewType.Months?12:this.viewType==u.ViewType.Quarter?4:1},n.prototype.getTaskWrapperElementInfo=function(n){var t=new f.GridElementInfo;return t.className=this.getTaskWrapperClassName(n),t.setPosition(this.getTaskWrapperPoint(n)),t.setSize(this.getTaskWrapperSize(n)),t},n.prototype.getTaskWrapperClassName=function(n){var t="dx-gantt-taskWrapper";return this.viewModel.items[n].selected&&(t+=" dx-gantt-selectedTask"),t},n.prototype.getTaskWrapperSize=function(n){var t=this.viewModel.items[n].resources.items.length,i=this.resourceMaxWidth*t,r=this.getTaskWidth(n),u=this.getTaskPoint(n),f=this.tickSize.width*this.horizontalTickCount,o=Math.min(r+i,f-u.x);return new e.Size(o)},n.prototype.getTaskWrapperPoint=function(n){var t=new r.Point(this.getPosByDate(this.getTask(n).start),n*this.tickSize.height);return this.getTask(n).isMilestone()&&(t.x-=this.getTaskHeight(n)/2),t},n.prototype.getTaskElementInfo=function(n){var t=new f.GridElementInfo;return this.getTask(n).isMilestone()||(t.size.width=this.getTaskWidth(n)),t.className=this.getTaskClassName(n,t.size.width),t},n.prototype.getTaskClassName=function(n,t){var i="dx-gantt-task";return this.getTask(n).isMilestone()?i+=" dx-gantt-milestone":t<=this.elementSizeValues.smallTaskWidth&&(i+=" dx-gantt-smallTask"),i},n.prototype.getTaskPoint=function(n){var t=this.getTaskWrapperPoint(n);return t.y+=this.elementSizeValues.taskWrapperTopPadding,t},n.prototype.getTaskSize=function(n){return new e.Size(this.getTaskWidth(n),this.getTaskHeight(n))},n.prototype.getTaskWidth=function(n){var t=this.getTask(n);return t.isMilestone()?this.getTaskHeight(n):this.getWidthByDateRange(t.start,t.end)},n.prototype.getTaskHeight=function(n){var t=this.getTask(n);return t.isMilestone()?this.milestoneWidth:this.taskHeight},n.prototype.getTask=function(n){return this.viewModel.items[n].task},n.prototype.getTaskProgressElementInfo=function(n){var t=new f.GridElementInfo;return t.className="dx-gantt-tPrg",t.setSize(this.getTaskProgressSize(n)),t},n.prototype.getTaskProgressSize=function(n){return new e.Size(this.getTaskProgressWidth(n),null)},n.prototype.getTaskProgressWidth=function(n){return this.getTaskWidth(n)*this.getTask(n).progress/100},n.prototype.getTaskTextElementInfo=function(n,t){var i=new f.GridElementInfo,r;return i.className=this.getTaskTextElementClassName(t),t||(r=this.getTaskPoint(n).x,r<this.elementSizeValues.outsideTaskTextDefaultWidth&&(i.size.width=r,i.margins.marginLeft=-r)),i},n.prototype.getTaskTextElementClassName=function(n){return"dx-gantt-taskTitle"+(n?" dx-gantt-titleIn":" dx-gantt-titleOut")},n.prototype.getTaskResourceElementInfo=function(){var n=new f.GridElementInfo;return n.className="dx-gantt-taskRes",n},n.prototype.getSelectionElementInfo=function(n){return this.getRowElementInfo(n,"dx-gantt-sel")},n.prototype.getSelectionPosition=function(n){var t=new r.Point;return t.y=n*this.tickSize.height,t},n.prototype.getSelectionSize=function(){return new e.Size(this.tickSize.width*this.horizontalTickCount,this.tickSize.height)},n.prototype.getHighlightRowInfo=function(n){return this.getRowElementInfo(n,"dx-gantt-altRow")},n.prototype.getRowElementInfo=function(n,t){var i=new f.GridElementInfo;return i.className=t,i.setPosition(this.getSelectionPosition(n)),i.setSize(this.getSelectionSize()),i},n.prototype.getNoWorkingIntervalInfo=function(n){var t=new f.GridElementInfo;return t.className="dx-gantt-nwi",t.setPosition(this.getNoWorkingIntervalPosition(n.start)),t.setSize(this.getNoWorkingIntervalSize(n)),t},n.prototype.getNoWorkingIntervalPosition=function(n){var t=new r.Point;return t.x=this.getPosByDate(n),t},n.prototype.getNoWorkingIntervalSize=function(n){return new e.Size(this.getWidthByDateRange(n.start,n.end),this.tickSize.height*this.verticalTickCount)},n.prototype.getConnectorInfo=function(n,t,i,r){for(var e=[],f=this.getConnectorPoints(t,i,r),u=0;u<f.length-1;u++)e.push(this.getConnectorLineInfo(n,f[u],f[u+1],u==0||u==f.length-2));return e.push(this.getArrowInfo(f,e,t,i)),e},n.prototype.getConnectorLineInfo=function(n,t,i,r){var u=new f.GridElementInfo,e=t.x==i.x;return u.className=this.getConnectorClassName(e),u.setPosition(this.getConnectorPosition(t,i)),u.setSize(this.getConnectorSize(t,i,e,r)),u.setAttribute("dependency-id",n),u},n.prototype.getConnectorClassName=function(n){return n?"dx-gantt-conn-v":"dx-gantt-conn-h"},n.prototype.getConnectorPosition=function(n,t){return new r.Point(Math.min(n.x,t.x),Math.min(n.y,t.y))},n.prototype.getConnectorSize=function(n,t,i,r){var u=new e.Size,f=r?0:0;return i?u.height=Math.abs(t.y-n.y+f):u.width=Math.abs(t.x-n.x+f),u},n.prototype.getArrowInfo=function(n,t,i,r){var u=new f.GridElementInfo,o=this.findArrowLineInfo(t,i,r),e=this.getArrowPosition(n,i,r);return u.className=this.getArrowClassName(e),u.setPosition(this.getArrowPoint(o,e)),u},n.prototype.findArrowLineInfo=function(n,t,i){var r=t<i?n.length-1:0;return n[r]},n.prototype.getArrowPosition=function(n,t,i){var r=n[t<i?n.length-2:1],f=n[t<i?n.length-1:0];return r.x==f.x?r.y>f.y?u.Position.Top:u.Position.Bottom:r.x>f.x?u.Position.Left:u.Position.Right},n.prototype.getArrowClassName=function(n){var t="dx-gantt-arrow";switch(n){case u.Position.Left:t+=" dx-gantt-LA";break;case u.Position.Top:t+=" dx-gantt-TA";break;case u.Position.Right:t+=" dx-gantt-RA";break;case u.Position.Bottom:t+=" dx-gantt-BA"}return t},n.prototype.getArrowPoint=function(n,t){return new r.Point(this.getArrowX(n,t),this.getArrowY(n,t))},n.prototype.getArrowX=function(n,t){switch(t){case u.Position.Left:return n.position.x-this.arrowSize.width/2;case u.Position.Right:return n.position.x+n.size.width-this.arrowSize.width/2;case u.Position.Top:case u.Position.Bottom:return n.position.x-(this.arrowSize.width-this.lineThickness)/2}},n.prototype.getArrowY=function(n,t){switch(t){case u.Position.Top:return n.position.y-this.arrowSize.height/2;case u.Position.Bottom:return n.position.y+n.size.height-this.arrowSize.height/2;case u.Position.Left:case u.Position.Right:return n.position.y-(this.arrowSize.height-this.lineThickness)/2}},n.prototype.getPosByDate=function(n){return this.getWidthByDateRange(this.range.start,n)},n.prototype.getWidthByDateRange=function(n,t){var i=this.getRangeTickCount(n,t)*this.tickSize.width;return Math.max(i,this.minTaskWidth)},n.prototype.getRangeTickCount=function(n,t){return this.viewType==u.ViewType.Months?this.getRangeTickCountInMonthsViewType(n,t):this.viewType==u.ViewType.Quarter?this.getRangeTickCountInQuarterViewType(n,t):(t.getTime()-n.getTime())/this.tickTimeSpan},n.prototype.getRangeTickCountInMonthsViewType=function(n,t){var i=new Date(n.getFullYear(),n.getMonth(),1),r=new Date(t.getFullYear(),t.getMonth(),1),u=o.DateUtils.getOffsetInMonths(i,r),f=t.getTime()-r.getTime(),e=n.getTime()-i.getTime();return u+(f-e)/o.DateUtils.msPerMonth},n.prototype.getRangeTickCountInQuarterViewType=function(n,t){var i=new Date(n.getFullYear(),Math.floor(n.getMonth()/3)*3,1),r=new Date(t.getFullYear(),Math.floor(t.getMonth()/3)*3,1),u=o.DateUtils.getOffsetInQuarters(i,r),f=t.getTime()-r.getTime(),e=n.getTime()-i.getTime();return u+(f-e)/(o.DateUtils.msPerMonth*3)},n.prototype.getDateByPos=function(n){var i=n/this.tickSize.width,t=new Date(this.range.start),r,e,f;return(this.viewType==u.ViewType.Months||this.viewType==u.ViewType.Quarter)&&(r=Math.floor(i),t=new Date(t.setMonth(t.getMonth()+(this.viewType==u.ViewType.Months?r:r*3))),i=(n-this.getPosByDate(t))/this.tickSize.width),e=i*this.tickTimeSpan+t.getTime(),f=new Date,f.setTime(e),f},n.prototype.getTotalTickCount=function(){return this.getRangeTickCount(this.range.start,this.range.end)},n.prototype.getConnectorPoints=function(n,t,i){switch(i){case s.DependencyType.FS:return this.getFinishToStartConnectorPoints(n,t);case s.DependencyType.SF:return this.getStartToFinishConnectorPoints(n,t);case s.DependencyType.SS:return this.getStartToStartConnectorPoints(n,t);case s.DependencyType.FF:return this.getFinishToFinishConnectorPoints(n,t);default:return[]}},n.prototype.getFinishToStartConnectorPoints=function(n,t){return n<t?this.getTask(n).end<=this.getTask(t).start?this.getConnectorPoints_FromTopTaskRightSide_ToBottomTaskTopSide(n,t,!1):this.getConnectorPoints_FromTopTaskRightSide_ToBottomTaskLeftSide(n,t,!1):this.getTask(n).end<=this.getTask(t).start?this.getConnectorPoints_FromTopTaskBottomSide_ToBottomTaskRightSide(t,n,!1):this.getConnectorPoints_FromTopTaskLeftSide_ToBottomTaskRightSide(t,n,!0)},n.prototype.getFinishToFinishConnectorPoints=function(n,t){return n<t?this.getConnectorPoints_FromTopTaskRightSide_ToBottomTaskRightSide(n,t):this.getConnectorPoints_FromTopTaskRightSide_ToBottomTaskRightSide(t,n)},n.prototype.getStartToStartConnectorPoints=function(n,t){return n<t?this.getConnectorPoints_FromTopTaskLeftSide_ToBottomTaskLeftSide(n,t):this.getConnectorPoints_FromTopTaskLeftSide_ToBottomTaskLeftSide(t,n)},n.prototype.getStartToFinishConnectorPoints=function(n,t){return n<t?this.getTask(n).start>=this.getTask(t).end?this.getConnectorPoints_FromTopTaskLeftSide_ToBottomTaskTopSide(n,t,!0):this.getConnectorPoints_FromTopTaskLeftSide_ToBottomTaskRightSide(n,t,!1):this.getTask(n).start>=this.getTask(t).end?this.getConnectorPoints_FromTopTaskBottomSide_ToBottomTaskLeftSide(t,n,!0):this.getConnectorPoints_FromTopTaskRightSide_ToBottomTaskLeftSide(t,n,!0)},n.prototype.getConnectorPoints_FromTopTaskRightSide_ToBottomTaskTopSide=function(n,t,i){var u=[],s=this.getTaskPoint(n),f=this.getTaskPoint(t),e=this.getTaskRightCenter(s,n),h=this.getTask(t).isMilestone(),o=this.getTaskTopCenter(f,t),c=i?this.getTaskWidth(t)-this.minLineLength:this.minLineLength;return u.push(new r.Point(e.x,e.y)),u.push(new r.Point(h?o.x:f.x+c,u[0].y)),u.push(new r.Point(u[1].x,o.y)),u},n.prototype.getConnectorPoints_FromTopTaskRightSide_ToBottomTaskRightSide=function(n,t){var i=[],e=this.getTaskPoint(n),o=this.getTaskPoint(t),f=this.getTaskRightCenter(e,n),u=this.getTaskRightCenter(o,t);return i.push(new r.Point(f.x,f.y)),i.push(new r.Point(Math.max(f.x,u.x)+this.minLineLength,i[0].y)),i.push(new r.Point(i[1].x,u.y)),i.push(new r.Point(u.x,u.y)),i},n.prototype.getConnectorPoints_FromTopTaskRightSide_ToBottomTaskLeftSide=function(n,t,i){var u=[],e=this.getTaskPoint(n),o=this.getTaskPoint(t),s=this.getTaskRightCenter(e,n),h=this.getTaskBottomCenter(e,n),f=this.getTaskLeftCenter(o,t),c=this.getTaskTopCenter(o,t);return u.push(new r.Point(s.x,s.y)),u.push(new r.Point(u[0].x+this.minLineLength,u[0].y)),u.push(new r.Point(u[1].x,i?h.y+this.minConnectorSpaceFromTask:c.y-this.minConnectorSpaceFromTask)),u.push(new r.Point(f.x-this.minLineLength,u[2].y)),u.push(new r.Point(u[3].x,f.y)),u.push(new r.Point(f.x,f.y)),u},n.prototype.getConnectorPoints_FromTopTaskBottomSide_ToBottomTaskRightSide=function(n,t,i){var u=[],e=this.getTaskPoint(n),s=this.getTaskPoint(t),o=this.getTaskBottomCenter(e,n),h=this.getTask(n).isMilestone(),f=this.getTaskRightCenter(s,t),c=i?this.getTaskWidth(n)-this.minLineLength:this.minLineLength;return u.push(new r.Point(h?o.x:e.x+c,o.y)),u.push(new r.Point(u[0].x,f.y)),u.push(new r.Point(f.x,f.y)),u},n.prototype.getConnectorPoints_FromTopTaskBottomSide_ToBottomTaskLeftSide=function(n,t,i){var u=[],e=this.getTaskPoint(n),s=this.getTaskPoint(t),o=this.getTaskBottomCenter(e,n),h=this.getTask(n).isMilestone(),f=this.getTaskLeftCenter(s,t),c=i?this.getTaskWidth(n)-this.minLineLength:this.minLineLength;return u.push(new r.Point(h?o.x:e.x+c,o.y)),u.push(new r.Point(u[0].x,f.y)),u.push(new r.Point(f.x,f.y)),u},n.prototype.getConnectorPoints_FromTopTaskLeftSide_ToBottomTaskTopSide=function(n,t,i){var u=[],s=this.getTaskPoint(n),f=this.getTaskPoint(t),e=this.getTaskLeftCenter(s,n),o=this.getTaskTopCenter(f,t),h=this.getTask(t).isMilestone(),c=i?this.getTaskWidth(t)-this.minLineLength:this.minLineLength;return u.push(new r.Point(e.x,e.y)),u.push(new r.Point(h?o.x:f.x+c,u[0].y)),u.push(new r.Point(u[1].x,o.y)),u},n.prototype.getConnectorPoints_FromTopTaskLeftSide_ToBottomTaskRightSide=function(n,t,i){var u=[],e=this.getTaskPoint(n),o=this.getTaskPoint(t),s=this.getTaskLeftCenter(e,n),h=this.getTaskBottomCenter(e,n),f=this.getTaskRightCenter(o,t),c=this.getTaskTopCenter(o,t);return u.push(new r.Point(s.x,s.y)),u.push(new r.Point(u[0].x-this.minLineLength,u[0].y)),u.push(new r.Point(u[1].x,i?h.y+this.minConnectorSpaceFromTask:c.y-this.minConnectorSpaceFromTask)),u.push(new r.Point(f.x+this.minLineLength,u[2].y)),u.push(new r.Point(u[3].x,f.y)),u.push(new r.Point(f.x,f.y)),u},n.prototype.getConnectorPoints_FromTopTaskLeftSide_ToBottomTaskLeftSide=function(n,t){var i=[],e=this.getTaskPoint(n),o=this.getTaskPoint(t),f=this.getTaskLeftCenter(e,n),u=this.getTaskLeftCenter(o,t);return i.push(new r.Point(f.x,f.y)),i.push(new r.Point(Math.min(f.x,u.x)-this.minLineLength,i[0].y)),i.push(new r.Point(i[1].x,u.y)),i.push(new r.Point(u.x,u.y)),i},n.prototype.getTaskLeftCenter=function(n,t){return new r.Point(n.x-this.getTaskEdgeCorrection(t),n.y+this.getTaskHeight(t)/2)},n.prototype.getTaskRightCenter=function(n,t){return new r.Point(n.x+this.getTaskWidth(t)+this.getTaskEdgeCorrection(t),n.y+this.getTaskHeight(t)/2)},n.prototype.getTaskTopCenter=function(n,t){return new r.Point(n.x+this.getTaskWidth(t)/2,n.y-this.getTaskEdgeCorrection(t))},n.prototype.getTaskBottomCenter=function(n,t){return new r.Point(n.x+this.getTaskWidth(t)/2,n.y+this.getTaskHeight(t)+this.getTaskEdgeCorrection(t))},n.prototype.getTaskEdgeCorrection=function(n){var t=this.viewModel.items[n].task.isMilestone();return t?this.getTaskHeight(n)*(Math.sqrt(2)-1)/2:0},n.prototype.getRenderedRowColumnIndices=function(n,t){for(var f=t?this.visibleTaskAreaSize.height:this.visibleTaskAreaSize.width,r=t?this.tickSize.height:this.tickSize.width,e=t?this.verticalTickCount:this.horizontalTickCount,o=this.getFirstVisibleGridCellIndex(n,r),s=this.getLastVisibleGridCellIndex(n,r,f,e),u=[],i=o;i<=s;i++)u.push(i);return u},n.prototype.getRenderedScaleItemIndices=function(n,t){for(var r=this.getScaleItemColSpan(n),f=Math.floor(t[0]/r),e=Math.floor(t[t.length-1]/r),u=[],i=f;i<=e;i++)u.push(i);return u},n.prototype.getFirstVisibleGridCellIndex=function(n,t){var i=Math.floor(n/t);return Math.max(i-10,0)},n.prototype.getLastVisibleGridCellIndex=function(n,t,i,r){var u=Math.floor((n+i)/t);return Math.min(u+10,r-1)},n.prototype.createTileToConnectorLinesMap=function(){var i=this,n,t;for(this.tileToDependencyMap=[],n=0;n<this.viewModel.items.length;n++)for(t=0;t<this.viewModel.items[n].dependencies.length;t++){var r=this.viewModel.items[n].dependencies[t].predecessor.visibleIndex,u=this.viewModel.items[n].visibleIndex,f=this.viewModel.items[n].dependencies[t].type,e=this.viewModel.items[n].dependencies[t].id,o=this.getConnectorInfo(e,r,u,f);o.forEach(function(n){i.addElementInfoToTileMap(n,i.tileToDependencyMap,!0)})}},n.prototype.createTileToNonWorkingIntervalsMap=function(){var n,t,i;for(this.tileToNoWorkingIntervalsMap=[],n=0;n<this.viewModel.noWorkingIntervals.length;n++)(t=this.getAdjustedNoWorkingInterval(this.viewModel.noWorkingIntervals[n]),t)&&(i=this.getNoWorkingIntervalInfo(t),this.addElementInfoToTileMap(i,this.tileToNoWorkingIntervalsMap,!1))},n.prototype.getAdjustedNoWorkingInterval=function(n){return n.end.getTime()-n.start.getTime()<this.tickTimeSpan-1?null:new h.DateRange(o.DateUtils.getNearestScaleTickDate(n.start,this.range,this.tickTimeSpan,this.viewType),o.DateUtils.getNearestScaleTickDate(n.end,this.range,this.tickTimeSpan,this.viewType))},n.prototype.addElementInfoToTileMap=function(n,t,i){for(var u=i?n.position.y:n.position.x,e=i?n.size.height:n.size.width,f=(i?this.visibleTaskAreaSize.height:this.visibleTaskAreaSize.width)*2,o=Math.floor(u/f),s=Math.floor((u+e)/f),r=o;r<=s;r++)t[r]||(t[r]=[]),t[r].push(n)},n.prototype.getRenderedConnectorLines=function(n){return this.getElementsInRenderedTiles(this.tileToDependencyMap,!0,n)},n.prototype.getRenderedNoWorkingIntervals=function(n){return this.getElementsInRenderedTiles(this.tileToNoWorkingIntervalsMap,!1,n)},n.prototype.getElementsInRenderedTiles=function(n,t,i){for(var u=t?this.visibleTaskAreaSize.height:this.visibleTaskAreaSize.width,e=Math.floor(i/(u*2)),o=Math.floor((i+u)/(u*2)),f=[],r=e;r<=o;r++)n[r]&&n[r].forEach(function(n){f.indexOf(n)==-1&&f.push(n)});return f},n}();t.GridLayoutCalculator=c},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){this.scaleItemWidths=new Map}return n}();t.EtalonSizeValues=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(57),u=i(59),f=i(60),e=function(){function n(n,t){this.task=new f.TaskManipulator(n,t);this.dependency=new r.TaskDependencyManipulator(n,t);this.resource=new u.ResourcesManipulator(n,t)}return n}();t.ModelManipulator=e},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(16);u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return f(t,n),t.prototype.insertDependency=function(n,t,i){var r=this.viewModel.dependencies.createItem();return r.predecessorId=n,r.successorId=t,r.type=i,this.viewModel.dependencies.add(r),this.dispatcher.notifyDependencyInserted(this.getObjectForDataSource(r),function(n){return r.id=n}),this.viewModel.updateVisibleItemDependencies(),this.viewModel.owner.resetAndUpdate(),r},t.prototype.removeDependency=function(n){var t=this.viewModel.dependencies.getItemById(n);return this.viewModel.dependencies.remove(t),this.dispatcher.notifyDependencyRemoved(t.id),this.viewModel.updateVisibleItemDependencies(),this.viewModel.owner.resetAndUpdate(),t},t.prototype.getObjectForDataSource=function(n){return{id:n.id,predecessorId:this.viewModel.tasks.getItemById(n.predecessorId).id,successorId:this.viewModel.tasks.getItemById(n.successorId).id,type:n.type}},t}(r.BaseManipulator);t.TaskDependencyManipulator=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t){this.taskId=n;this.value=t}return n}();t.HistoryItemState=i},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(16);u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return f(t,n),t.prototype.create=function(n,t){var i=this.viewModel.resources.createItem();return i.text=n,t&&(i.internalId=t),this.viewModel.resources.add(i),this.dispatcher.notifyResourceCreated(this.getResourceObjectForDataSource(i),function(n){return i.id=n}),i},t.prototype.remove=function(n){var t=this.viewModel.resources.getItemById(n),i;if(!t)throw new Error("Invalid resource id");if(i=this.viewModel.assignments.items.filter(function(t){return t.resourceId==n}),i.length)throw new Error("Can't delete assigned resource");return this.viewModel.resources.remove(t),this.dispatcher.notifyResourceRemoved(t.id),t},t.prototype.assign=function(n,t){var i=this.viewModel.assignments.createItem();return i.resourceId=n,i.taskId=t,this.viewModel.assignments.add(i),this.dispatcher.notifyResourceAssigned(this.getResourceAssignmentObjectForDataSource(i),function(n){return i.id=n}),this.viewModel.updateModel(),this.viewModel.owner.resetAndUpdate(),i},t.prototype.deassig=function(n){var t=this.viewModel.assignments.getItemById(n);return this.viewModel.assignments.remove(t),this.dispatcher.notifyResourceUnassigned(t),this.viewModel.updateModel(),this.viewModel.owner.resetAndUpdate(),t},t.prototype.getResourceObjectForDataSource=function(n){return{id:n.id,text:n.text}},t.prototype.getResourceAssignmentObjectForDataSource=function(n){return{id:n,taskId:this.viewModel.tasks.getItemById(n.taskId).id,resourceId:this.viewModel.resources.getItemById(n.resourceId).id}},t}(r.BaseManipulator);t.ResourcesManipulator=u},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(16);u=function(n){function t(t,i){var u=n.call(this,t,i)||this;return u.properties=new r.TaskPropertiesManipulator(t,i),u}return f(t,n),t.prototype.create=function(n,t,i,r,u){var f=this.viewModel.tasks.createItem(),e;return f.start=n,f.end=t,f.title=i,r&&(e=this.viewModel.tasks.getItemById(r),e.expanded=!0,f.parentId=r),u&&(f.internalId=u),f.id=f.internalId,this.viewModel.tasks.add(f),this.viewModel.updateModel(),this.dispatcher.notifyTaskCreated(this.getObjectForDataSource(f),function(n){return f.id=n}),this.viewModel.owner.resetAndUpdate(),f},t.prototype.remove=function(n){var t=this.viewModel.tasks.getItemById(n),i,r;if(!t)throw new Error("Invalid task id");if(i=this.viewModel.dependencies.items.filter(function(t){return t.predecessorId==n||t.successorId==n}),i.length)throw new Error("Can't delete task with dependency");if(r=this.viewModel.assignments.items.filter(function(t){return t.taskId==n}),r.length)throw new Error("Can't delete task with assigned resource");return this.viewModel.tasks.remove(t),this.dispatcher.notifyTaskRemoved(t.id),this.viewModel.updateModel(),this.viewModel.owner.resetAndUpdate(),t},t.prototype.getObjectForDataSource=function(n){return{id:n.id,start:n.start,end:n.end,duration:n.duration,description:n.description,parentId:this.viewModel.tasks.getItemById(n.parentId).id,progress:n.progress,taskType:n.taskType,title:n.title,customFields:n.customFields,expanded:n.expanded}},t}(r.BaseManipulator);t.TaskManipulator=u},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(9),u=function(){function n(){this.historyItems=[];this.currentIndex=-1;this.transaction=null;this.transactionLevel=-1}return n.prototype.undo=function(){this.currentIndex<0||(this.historyItems[this.currentIndex].undo(),this.currentIndex--)},n.prototype.redo=function(){this.currentIndex>=this.historyItems.length-1||(this.currentIndex++,this.historyItems[this.currentIndex].redo())},n.prototype.beginTransaction=function(){this.transactionLevel++;this.transactionLevel==0&&(this.transaction=new r.CompositionHistoryItem)},n.prototype.endTransaction=function(){if(!(--this.transactionLevel>=0)){var n=this.transaction.historyItems.length;n>1?this.addInternal(this.transaction):n==1&&this.addInternal(this.transaction.historyItems.pop());this.transaction=null}},n.prototype.addAndRedo=function(n){this.add(n);n.redo()},n.prototype.add=function(n){this.transactionLevel>=0?this.transaction.add(n):this.addInternal(n)},n.prototype.addInternal=function(n){this.currentIndex<this.historyItems.length-1&&this.historyItems.splice(this.currentIndex+1);this.historyItems.push(n);this.currentIndex++;this.deleteOldItems()},n.prototype.deleteOldItems=function(){var t=this.historyItems.length-n.MAX_HISTORY_ITEM_COUNT;t>0&&this.currentIndex>t&&(this.historyItems.splice(0,t),this.currentIndex-=t)},n.prototype.clear=function(){this.currentIndex=-1;this.historyItems=[]},n.MAX_HISTORY_ITEM_COUNT=100,n}();t.History=u},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=i(63),f=i(1),r=i(71),e=i(12),o=function(){function n(n){this.control=n;this.mouseHandler=new u.MouseHandler(n)}return n.prototype.onMouseDown=function(n){this.mouseHandler.onMouseDown(n)},n.prototype.onMouseMove=function(n){this.mouseHandler.onMouseMove(n)},n.prototype.onMouseUp=function(n){this.mouseHandler.onMouseUp(n)},n.prototype.onMouseDblClick=function(n){this.mouseHandler.onMouseDoubleClick(n)},n.prototype.onMouseWheel=function(n){this.mouseHandler.onMouseWheel(n)},n.prototype.onKeyDown=function(n){if(this.control.isFocus){var t=this.getShortcutCode(n);t==(r.ModifierKey.Ctrl|r.KeyCode.Key_z)&&this.control.history.undo();t==(r.ModifierKey.Ctrl|r.KeyCode.Key_y)&&this.control.history.redo();t==r.KeyCode.Delete&&this.control.taskEditController.deleteSelectedDependency()}},n.prototype.getShortcutCode=function(n){var i=f.DomUtils.GetKeyCode(n),t=0;return n.altKey&&(t|=r.ModifierKey.Alt),n.ctrlKey&&(t|=r.ModifierKey.Ctrl),n.shiftKey&&(t|=r.ModifierKey.Shift),n.metaKey&&e.Browser.MacOSPlatform&&(t|=r.ModifierKey.Meta),t|i},n}();t.EventManager=o},function(n,t,i){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var f=i(64),r=i(8),e=i(29),o=i(65),s=i(1),h=i(67),c=i(68),l=i(69),a=i(70),v=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.onMouseDoubleClick=function(n){this.state.onMouseDoubleClick(n)},t.prototype.onMouseDown=function(n){var t=this.getMouseEventSource(s.DomUtils.getEventSource(n));switch(t){case r.MouseEventSource.TaskEdit_Frame:this.switchState(new h.MouseHandlerMoveTaskState(this));break;case r.MouseEventSource.TaskEdit_Progress:this.switchState(new c.MouseHandlerProgressTaskState(this));break;case r.MouseEventSource.TaskEdit_Start:case r.MouseEventSource.TaskEdit_End:this.switchState(new l.MouseHandlerTimestampTaskState(this));break;case r.MouseEventSource.TaskEdit_DependencyStart:case r.MouseEventSource.TaskEdit_DependencyFinish:this.switchState(new a.MouseHandlerDependencyState(this))}this.state.onMouseDown(n)},t.prototype.onMouseUp=function(n){this.state.onMouseUp(n)},t.prototype.onMouseMove=function(n){this.state.onMouseMove(n)},t.prototype.onMouseWheel=function(n){this.state.onMouseWheel(n)},t.prototype.switchToDefaultState=function(){this.state=new o.MouseHandlerDefaultState(this)},t.prototype.getMouseEventSource=function(n){var t=n.nodeType===Node.ELEMENT_NODE?n:n.parentNode,i=t.className;return e.TaskEditController.classToSource.get(i)||r.MouseEventSource.TaskArea},t}(f.HandlerBase);t.MouseHandler=v},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n){this.control=n;this.switchToDefaultState()}return n.prototype.switchState=function(n){this.state&&this.state.finish();this.state=n;this.state.start()},n.prototype.switchToDefaultState=function(){throw new Error("Not implemented");},n}();t.HandlerBase=i},function(n,t,i){"use strict";var e=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),u;Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),o=i(17),f=i(3),s=function(n){function t(t){var i=n.call(this,t)||this;return i.ganttMovingHelper=new u(i.handler.control),i}return e(t,n),t.prototype.onMouseDown=function(n){var t,i;n.preventDefault();t=r.DomUtils.getEventSource(n);t.className==this.handler.control.gridLayoutCalculator.getConnectorClassName(!0)||t.className==this.handler.control.gridLayoutCalculator.getConnectorClassName(!1)?(i=t.getAttribute("dependency-id"),this.handler.control.taskEditController.selectDependency(i),this.handler.control.resetAndUpdate()):(r.DomUtils.IsLeftButtonPressed(n)&&this.ganttMovingHelper.startMoving(n),this.handler.control.taskEditController.dependencyId!=null&&(this.handler.control.taskEditController.selectDependency(null),this.handler.control.resetAndUpdate()))},t.prototype.onMouseUp=function(n){this.ganttMovingHelper.onMouseUp(n)},t.prototype.onMouseMove=function(n){if(this.ganttMovingHelper.movingInfo){this.ganttMovingHelper.onMouseMove(n);n.preventDefault()}},t.prototype.onMouseWheel=function(n){var t;if(n.ctrlKey){n.preventDefault();n.stopPropagation();var i=r.DomUtils.getWheelDelta(n)>0,u=new f.Point(r.DomUtils.getEventX(n),r.DomUtils.getEventY(n)),e=this.getRelativePos(new f.Point(r.DomUtils.getEventX(n),r.DomUtils.getEventY(n))),o=this.handler.control.gridLayoutCalculator.getDateByPos(e.x);i?this.handler.control.zoomIn():this.handler.control.zoomOut();t=this.handler.control.gridLayoutCalculator.getPosByDate(o);this.handler.control.taskAreaContainer.scrollLeft=t-(u.x-r.DomUtils.getAbsolutePositionX(this.handler.control.taskAreaContainer.getElement()))}},t}(o.MouseHandlerStateBase);t.MouseHandlerDefaultState=s;u=function(){function n(n){this.gantt=n;this.movingInfo=null}return n.prototype.startMoving=function(n){this.movingInfo=this.calcMovingInfo(n);this.updateGanttAreaCursor(!0)},n.prototype.cancelMoving=function(){this.movingInfo=null},n.prototype.onMouseMove=function(n){this.move(n)},n.prototype.onMouseUp=function(){this.cancelMoving();this.updateGanttAreaCursor(!1)},n.prototype.move=function(n){this.updateScrollPosition(n)},n.prototype.updateScrollPosition=function(n){var l=Math.round(r.DomUtils.getEventX(n)),a=Math.round(r.DomUtils.getEventY(n)),t=l-this.movingInfo.eventX,i=a-this.movingInfo.eventY,f=t<0?-1:1,e=i<0?-1:1,o=f<0?this.movingInfo.maxRightDelta:this.movingInfo.maxLeftDelta,s=e<0?this.movingInfo.maxBottomDelta:this.movingInfo.maxTopDelta;Math.abs(t)>o&&(t=o*f);Math.abs(i)>s&&(i=s*e);var h=this.movingInfo.scrollLeft-t,c=this.movingInfo.scrollTop-i,u=this.gantt.taskAreaContainer;u.scrollLeft!==h&&(u.scrollLeft=h);u.scrollTop!==c&&(u.scrollTop=c)},n.prototype.calcMovingInfo=function(n){var t=this.gantt.taskAreaContainer;return{eventX:r.DomUtils.getEventX(n),eventY:r.DomUtils.getEventY(n),scrollLeft:t.scrollLeft,scrollTop:t.scrollTop,maxLeftDelta:t.scrollLeft,maxRightDelta:t.scrollWidth-t.scrollLeft-t.getElement().offsetWidth,maxTopDelta:t.scrollTop,maxBottomDelta:t.scrollHeight-t.scrollTop-t.getElement().offsetHeight}},n.prototype.updateGanttAreaCursor=function(n){this.gantt.taskAreaContainer.getElement().style.cursor=n?"grabbing":"default"},n}();t.GanttMovingHelper=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n){this.handler=n}return n.prototype.start=function(){},n.prototype.finish=function(){},n}();t.HandlerStateBase=i},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(18);u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return f(t,n),t.prototype.onMouseUpInternal=function(){this.handler.control.taskEditController.confirmMove()},t.prototype.onMouseMoveInternal=function(n){this.handler.control.taskEditController.processMove(n.x-this.currentPosition.x)},t}(r.MouseHandlerDragBaseState);t.MouseHandlerMoveTaskState=u},function(n,t,i){"use strict";var f=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,u;Object.defineProperty(t,"__esModule",{value:!0});r=i(18);u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return f(t,n),t.prototype.onMouseUpInternal=function(){this.handler.control.taskEditController.confirmProgress()},t.prototype.onMouseMoveInternal=function(n){var t=this.getRelativePos(n);this.handler.control.taskEditController.processProgress(t)},t}(r.MouseHandlerDragBaseState);t.MouseHandlerProgressTaskState=u},function(n,t,i){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=i(8),f=i(1),e=i(18),o=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.onMouseDown=function(t){n.prototype.onMouseDown.call(this,t);this.source=this.handler.getMouseEventSource(f.DomUtils.getEventSource(t))},t.prototype.onMouseUpInternal=function(){this.source==r.MouseEventSource.TaskEdit_Start?this.handler.control.taskEditController.confirmStart():this.handler.control.taskEditController.confirmEnd()},t.prototype.onMouseMoveInternal=function(n){var t=this.getRelativePos(n);this.source==r.MouseEventSource.TaskEdit_Start&&this.handler.control.taskEditController.processStart(t);this.source==r.MouseEventSource.TaskEdit_End&&this.handler.control.taskEditController.processEnd(t)},t}(e.MouseHandlerDragBaseState);t.MouseHandlerTimestampTaskState=o},function(n,t,i){"use strict";var h=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),s;Object.defineProperty(t,"__esModule",{value:!0});var o=i(3),f=i(1),c=i(17),r=i(8),e=i(14),u=[];u[r.MouseEventSource.TaskEdit_DependencyStart]=[];u[r.MouseEventSource.TaskEdit_DependencyFinish]=[];u[r.MouseEventSource.TaskEdit_DependencyStart][r.MouseEventSource.Successor_DependencyStart]=e.DependencyType.SS;u[r.MouseEventSource.TaskEdit_DependencyStart][r.MouseEventSource.Successor_DependencyFinish]=e.DependencyType.SF;u[r.MouseEventSource.TaskEdit_DependencyFinish][r.MouseEventSource.Successor_DependencyStart]=e.DependencyType.FS;u[r.MouseEventSource.TaskEdit_DependencyFinish][r.MouseEventSource.Successor_DependencyFinish]=e.DependencyType.FF;s=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return h(t,n),t.prototype.onMouseDown=function(n){var t=f.DomUtils.getEventSource(n),i;this.source=this.handler.getMouseEventSource(t);i=this.getRelativePos(new o.Point(f.DomUtils.getAbsolutePositionX(t)+t.clientWidth/2,f.DomUtils.getAbsolutePositionY(t)+t.clientHeight/2));this.handler.control.taskEditController.startDependency(i)},t.prototype.onMouseUp=function(n){var t=this.handler.getMouseEventSource(f.DomUtils.getEventSource(n)),i=t===r.MouseEventSource.Successor_DependencyStart||t==r.MouseEventSource.Successor_DependencyFinish?u[this.source][t]:null;this.handler.control.taskEditController.endDependency(i);this.handler.switchToDefaultState()},t.prototype.onMouseMove=function(n){n.preventDefault();var t=this.getRelativePos(new o.Point(f.DomUtils.getEventX(n),f.DomUtils.getEventY(n))),i=Math.floor(t.y/this.handler.control.tickSize.height);this.handler.control.taskEditController.processDependency(t);this.handler.control.viewModel.tasks.items[i]&&this.handler.control.taskEditController.showDependencySuccessor(i)},t}(c.MouseHandlerStateBase);t.MouseHandlerDependencyState=s},function(n,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),function(n){n[n.None=0]="None";n[n.Ctrl=65536]="Ctrl";n[n.Shift=262144]="Shift";n[n.Alt=1048576]="Alt";n[n.Meta=16777216]="Meta"}(i=t.ModifierKey||(t.ModifierKey={})),function(n){n[n.Backspace=8]="Backspace";n[n.Tab=9]="Tab";n[n.Enter=13]="Enter";n[n.Pause=19]="Pause";n[n.CapsLock=20]="CapsLock";n[n.Esc=27]="Esc";n[n.Space=32]="Space";n[n.PageUp=33]="PageUp";n[n.PageDown=34]="PageDown";n[n.End=35]="End";n[n.Home=36]="Home";n[n.Left=37]="Left";n[n.Up=38]="Up";n[n.Right=39]="Right";n[n.Down=40]="Down";n[n.Insert=45]="Insert";n[n.Delete=46]="Delete";n[n.Key_0=48]="Key_0";n[n.Key_1=49]="Key_1";n[n.Key_2=50]="Key_2";n[n.Key_3=51]="Key_3";n[n.Key_4=52]="Key_4";n[n.Key_5=53]="Key_5";n[n.Key_6=54]="Key_6";n[n.Key_7=55]="Key_7";n[n.Key_8=56]="Key_8";n[n.Key_9=57]="Key_9";n[n.Key_a=65]="Key_a";n[n.Key_b=66]="Key_b";n[n.Key_c=67]="Key_c";n[n.Key_d=68]="Key_d";n[n.Key_e=69]="Key_e";n[n.Key_f=70]="Key_f";n[n.Key_g=71]="Key_g";n[n.Key_h=72]="Key_h";n[n.Key_i=73]="Key_i";n[n.Key_j=74]="Key_j";n[n.Key_k=75]="Key_k";n[n.Key_l=76]="Key_l";n[n.Key_m=77]="Key_m";n[n.Key_n=78]="Key_n";n[n.Key_o=79]="Key_o";n[n.Key_p=80]="Key_p";n[n.Key_q=81]="Key_q";n[n.Key_r=82]="Key_r";n[n.Key_s=83]="Key_s";n[n.Key_t=84]="Key_t";n[n.Key_u=85]="Key_u";n[n.Key_v=86]="Key_v";n[n.Key_w=87]="Key_w";n[n.Key_x=88]="Key_x";n[n.Key_y=89]="Key_y";n[n.Key_z=90]="Key_z";n[n.Windows=91]="Windows";n[n.ContextMenu=93]="ContextMenu";n[n.Numpad_0=96]="Numpad_0";n[n.Numpad_1=97]="Numpad_1";n[n.Numpad_2=98]="Numpad_2";n[n.Numpad_3=99]="Numpad_3";n[n.Numpad_4=100]="Numpad_4";n[n.Numpad_5=101]="Numpad_5";n[n.Numpad_6=102]="Numpad_6";n[n.Numpad_7=103]="Numpad_7";n[n.Numpad_8=104]="Numpad_8";n[n.Numpad_9=105]="Numpad_9";n[n.Multiply=106]="Multiply";n[n.Add=107]="Add";n[n.Subtract=109]="Subtract";n[n.Decimal=110]="Decimal";n[n.Divide=111]="Divide";n[n.F1=112]="F1";n[n.F2=113]="F2";n[n.F3=114]="F3";n[n.F4=115]="F4";n[n.F5=116]="F5";n[n.F6=117]="F6";n[n.F7=118]="F7";n[n.F8=119]="F8";n[n.F9=120]="F9";n[n.F10=121]="F10";n[n.F11=122]="F11";n[n.F12=123]="F12";n[n.NumLock=144]="NumLock";n[n.ScrollLock=145]="ScrollLock";n[n.Semicolon=186]="Semicolon";n[n.Equals=187]="Equals";n[n.Comma=188]="Comma";n[n.Dash=189]="Dash";n[n.Period=190]="Period";n[n.ForwardSlash=191]="ForwardSlash";n[n.GraveAccent=192]="GraveAccent";n[n.OpenBracket=219]="OpenBracket";n[n.BackSlash=220]="BackSlash";n[n.CloseBracket=221]="CloseBracket";n[n.SingleQuote=222]="SingleQuote"}(r=t.KeyCode||(t.KeyCode={}))},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t){this.element=n;this.element.addEventListener("scroll",function(){t.updateView()})}return Object.defineProperty(n.prototype,"scrollTop",{get:function(){return this.element.scrollTop},set:function(n){this.element.scrollTop=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollLeft",{get:function(){return this.element.scrollLeft},set:function(n){this.element.scrollLeft=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollWidth",{get:function(){return this.element.scrollWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollHeight",{get:function(){return this.element.scrollHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isExternal",{get:function(){return!1},enumerable:!0,configurable:!0}),n.prototype.getWidth=function(){return this.element.offsetWidth},n.prototype.getHeight=function(){return this.element.offsetHeight},n.prototype.getElement=function(){return this.element},n}();t.TaskAreaContainer=i},function(n,t,i){"use strict";var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(7),r=i(0),e=function(){function n(){this.viewType=undefined;this.taskTitlePosition=f.TaskTitlePosition.Inside;this.showResources=!0;this.areHorizontalBordersEnabled=!0;this.areVerticalBordersEnabled=!0;this.areAlternateRowsEnabled=!0;this.allowSelectTask=!0;this.editing=new u}return n.parse=function(t){var i=new n;return t&&(r.JsonUtils.isExists(t.viewType)&&(i.viewType=t.viewType),r.JsonUtils.isExists(t.taskTitlePosition)&&(i.taskTitlePosition=t.taskTitlePosition),r.JsonUtils.isExists(t.showResources)&&(i.showResources=t.showResources),r.JsonUtils.isExists(t.areHorizontalBordersEnabled)&&(i.areHorizontalBordersEnabled=t.areHorizontalBordersEnabled),r.JsonUtils.isExists(t.areVerticalBordersEnabled)&&(i.areHorizontalBordersEnabled=t.areHorizontalBordersEnabled),r.JsonUtils.isExists(t.areAlternateRowsEnabled)&&(i.areAlternateRowsEnabled=t.areAlternateRowsEnabled),r.JsonUtils.isExists(t.allowSelectTask)&&(i.allowSelectTask=t.allowSelectTask),r.JsonUtils.isExists(t.editing)&&(i.editing=u.parse(t.editing))),i},n}();t.Settings=e;u=function(){function n(){this.enabled=!1;this.allowDependencyDeleting=!0;this.allowDependencyAdding=!0;this.allowDependencyUpdating=!0;this.allowTaskDeleting=!0;this.allowTaskAdding=!0;this.allowTaskUpdating=!0;this.allowResourceDeleting=!0;this.allowResourceAdding=!0;this.allowResourceUpdating=!0}return n.parse=function(t){var i=new n;return t&&(r.JsonUtils.isExists(t.enabled)&&(i.enabled=t.enabled),r.JsonUtils.isExists(t.allowDependencyDeleting)&&(i.allowDependencyDeleting=t.allowDependencyDeleting),r.JsonUtils.isExists(t.allowDependencyAdding)&&(i.allowDependencyAdding=t.allowDependencyAdding),r.JsonUtils.isExists(t.allowDependencyUpdating)&&(i.allowDependencyUpdating=t.allowDependencyUpdating),r.JsonUtils.isExists(t.allowTaskDeleting)&&(i.allowTaskDeleting=t.allowTaskDeleting),r.JsonUtils.isExists(t.allowTaskAdding)&&(i.allowTaskAdding=t.allowTaskAdding),r.JsonUtils.isExists(t.allowTaskUpdating)&&(i.allowTaskUpdating=t.allowTaskUpdating),r.JsonUtils.isExists(t.allowResourceDeleting)&&(i.allowResourceDeleting=t.allowResourceDeleting),r.JsonUtils.isExists(t.allowResourceAdding)&&(i.allowResourceAdding=t.allowResourceAdding),r.JsonUtils.isExists(t.allowResourceUpdating)&&(i.allowResourceUpdating=t.allowResourceUpdating)),i},n}();t.EditingSettings=u},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(75),u=function(){function n(){this.onModelChanged=new r.EventDispatcher}return n.prototype.notifyTaskCreated=function(n,t){this.onModelChanged.raise("NotifyTaskCreated",n,t)},n.prototype.notifyTaskRemoved=function(n){this.onModelChanged.raise("NotifyTaskRemoved",n)},n.prototype.notifyTaskTitleChanged=function(n,t){this.onModelChanged.raise("NotifyTaskTitleChanged",n,t)},n.prototype.notifyTaskDescriptionChanged=function(n,t){this.onModelChanged.raise("NotifyTaskDescriptionChanged",n,t)},n.prototype.notifyTaskStartChanged=function(n,t){this.onModelChanged.raise("NotifyTaskStartChanged",n,t)},n.prototype.notifyTaskEndChanged=function(n,t){this.onModelChanged.raise("NotifyTaskEndChanged",n,t)},n.prototype.notifyTaskProgressChanged=function(n,t){this.onModelChanged.raise("NotifyTaskProgressChanged",n,t)},n.prototype.notifyDependencyInserted=function(n,t){this.onModelChanged.raise("NotifyDependencyInserted",n,t)},n.prototype.notifyDependencyRemoved=function(n){this.onModelChanged.raise("NotifyDependencyRemoved",n)},n.prototype.notifyResourceCreated=function(n,t){this.onModelChanged.raise("NotifyResourceCreated",n,t)},n.prototype.notifyResourceRemoved=function(n){this.onModelChanged.raise("NotifyResourceRemoved",n)},n.prototype.notifyResourceAssigned=function(n,t){this.onModelChanged.raise("NotifyResourceAssigned",n,t)},n.prototype.notifyResourceUnassigned=function(n){this.onModelChanged.raise("NotifyResourceUnassigned",n)},n}();t.ModelChangesDispatcher=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){this.listeners=[]}return n.prototype.add=function(n){if(!n)throw new Error("Error");this.hasEventListener(n)||this.listeners.push(n)},n.prototype.remove=function(n){for(var t=0,i;i=this.listeners[t];t++)if(i===n){this.listeners.splice(t,1);break}},n.prototype.raise=function(n){for(var i,r,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(i=0;r=this.listeners[i];i++)r[n].apply(r,u)},n.prototype.hasEventListener=function(n){for(var t=0,i=this.listeners.length;t<i;t++)if(this.listeners[t]===n)return!0;return!1},n}();t.EventDispatcher=i},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=i(77),u=i(79),o=i(80),e=i(81),s=i(82),h=i(83),c=i(84),r=i(85),l=function(){function n(n){this.control=n;this.commands={};this.createCommand(r.GanttClientCommand.CreateTask,this.createTaskCommand);this.createCommand(r.GanttClientCommand.CreateSubTask,this.createSubTaskCommand);this.createCommand(r.GanttClientCommand.RemoveTask,this.removeTaskCommand);this.createCommand(r.GanttClientCommand.RemoveDependency,this.removeDependencyCommand);this.createCommand(r.GanttClientCommand.TaskInformation,this.showTaskEditDialog);this.createCommand(r.GanttClientCommand.TaskAddContextItem,new f.TaskAddContextItemCommand(this.control))}return Object.defineProperty(n.prototype,"createTaskCommand",{get:function(){return new f.CreateTaskCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"createSubTaskCommand",{get:function(){return new f.CreateSubTaskCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"removeTaskCommand",{get:function(){return new f.RemoveTaskCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"changeTaskTitleCommand",{get:function(){return new u.TaskTitleCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"changeTaskDescriptionCommand",{get:function(){return new u.TaskDescriptionCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"changeTaskProgressCommand",{get:function(){return new u.TaskProgressCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"changeTaskStartCommand",{get:function(){return new u.TaskStartCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"changeTaskEndCommand",{get:function(){return new u.TaskEndCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"createDependencyCommand",{get:function(){return new o.CreateDependencyCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"removeDependencyCommand",{get:function(){return new o.RemoveDependencyCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"createResourceCommand",{get:function(){return new e.CreateResourceCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"removeResourceCommand",{get:function(){return new e.RemoveResourceCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"assignResourceCommand",{get:function(){return new e.AssignResourceCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"deassignResourceCommand",{get:function(){return new e.DeassignResourceCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showTaskEditDialog",{get:function(){return new s.TaskEditDialogCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showConstraintViolationDialog",{get:function(){return new h.ConstraintViolationDialogCommand(this.control)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showResourcesDialog",{get:function(){return new c.ResourcesDialogCommand(this.control)},enumerable:!0,configurable:!0}),n.prototype.getCommand=function(n){return this.commands[n]},n.prototype.createCommand=function(n,t){this.commands[n]=t},n}();t.CommandManager=l},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),o,s,h,c;Object.defineProperty(t,"__esModule",{value:!0});var e=i(5),f=i(78),l=i(19),a=i(20),u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.getState=function(){var n=new e.SimpleCommandState(this.isEnabled());return n.visible=n.enabled&&!this.control.taskEditController.dependencyId,n},t}(e.CommandBase);t.TaskCommandBase=u;o=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t,i,r,u){return n.prototype.execute.call(this,t,i,r,u)},t.prototype.executeInternal=function(n,t,i,r){var u,o,e;return r||(u=this.control.viewModel.findItem(this.control.currentSelectedTaskID).task,u&&(r=u.parentId)),o=this.control.viewModel.findItem(r)||this.control.viewModel.items[0],e=o.task,n=n||new Date(e.start.getTime()),t=t||new Date(e.end.getTime()),i=i||"New task",this.history.addAndRedo(new f.CreateTaskHistoryItem(this.modelManipulator,n,t,i,r)),!0},t.prototype.isEnabled=function(){return n.prototype.isEnabled.call(this)&&this.control.settings.editing.allowTaskAdding},t}(u);t.CreateTaskCommand=o;s=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t){return n.prototype.execute.call(this,t)},t.prototype.executeInternal=function(n){n=n||this.control.currentSelectedTaskID;var t=this.control.viewModel.findItem(n);return t.selected?(this.history.addAndRedo(new f.CreateTaskHistoryItem(this.modelManipulator,new Date(t.task.start.getTime()),new Date(t.task.end.getTime()),"New task",n)),!0):!1},t.prototype.isEnabled=function(){return n.prototype.isEnabled.call(this)&&this.control.settings.editing.allowTaskAdding},t.prototype.getState=function(){var t=n.prototype.getState.call(this),i=this.control.viewModel.findItem(this.control.currentSelectedTaskID);return t.visible=t.visible&&i&&i.selected,t},t}(u);t.CreateSubTaskCommand=s;h=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t){return n.prototype.execute.call(this,t)},t.prototype.executeInternal=function(n){var i=this,u,r,e;if(n=n||this.control.currentSelectedTaskID,this.control.viewModel.beginUpdate(),this.history.beginTransaction(),u=this.control.viewModel.tasks.items.filter(function(t){return t.parentId==n}),u.forEach(function(n){return new t(i.control).execute(n.internalId)}),r=this.control.viewModel.dependencies.items.filter(function(t){return t.predecessorId==n||t.successorId==n}),r.length)if(this.control.settings.editing.allowDependencyDeleting)r.forEach(function(n){return i.history.addAndRedo(new l.RemoveDependencyHistoryItem(i.modelManipulator,n.internalId))});else return!1;return e=this.control.viewModel.assignments.items.filter(function(t){return t.taskId==n}),e.forEach(function(n){return i.history.addAndRedo(new a.DeassignResourceHistoryItem(i.modelManipulator,n.internalId))}),this.history.addAndRedo(new f.RemoveTaskHistoryItem(this.modelManipulator,n)),this.history.endTransaction(),this.control.viewModel.endUpdate(),!0},t.prototype.isEnabled=function(){return n.prototype.isEnabled.call(this)&&this.control.settings.editing.allowTaskDeleting},t}(u);t.RemoveTaskCommand=h;c=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.getState=function(){var t=n.prototype.getState.call(this);return t.visible=t.visible&&this.control.settings.editing.allowTaskAdding,t},t.prototype.execute=function(){return!1},t}(u);t.TaskAddContextItemCommand=c},function(n,t,i){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,f,e;Object.defineProperty(t,"__esModule",{value:!0});r=i(9);f=function(n){function t(t,i,r,u,f){var e=n.call(this,t)||this;return e.start=i,e.end=r,e.title=u,e.parentId=f,e}return u(t,n),t.prototype.redo=function(){this.taskId=this.modelManipulator.task.create(this.start,this.end,this.title,this.parentId,this.taskId?this.taskId:null).internalId},t.prototype.undo=function(){this.modelManipulator.task.remove(this.taskId)},t}(r.HistoryItem);t.CreateTaskHistoryItem=f;e=function(n){function t(t,i){var r=n.call(this,t)||this;return r.taskId=i,r}return u(t,n),t.prototype.redo=function(){this.task=this.modelManipulator.task.remove(this.taskId)},t.prototype.undo=function(){this.modelManipulator.task.create(this.task.start,this.task.end,this.task.title,this.task.parentId,this.task.internalId)},t}(r.HistoryItem);t.RemoveTaskHistoryItem=e},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),o,s,h,c,l;Object.defineProperty(t,"__esModule",{value:!0});var e=i(5),f=i(30),u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.getState=function(){return new e.SimpleCommandState(this.isEnabled())},t.prototype.isEnabled=function(){return n.prototype.isEnabled.call(this)&&this.control.settings.editing.allowTaskUpdating},t}(e.CommandBase);t.TaskPropertyCommandBase=u;o=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t,i){return n.prototype.execute.call(this,t,i)},t.prototype.executeInternal=function(n,t){var i=this.control.viewModel.tasks.getItemById(n).title;return i==t?!1:(this.history.addAndRedo(new f.TaskTitleHistoryItem(this.modelManipulator,n,t)),!0)},t}(u);t.TaskTitleCommand=o;s=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t,i){return n.prototype.execute.call(this,t,i)},t.prototype.executeInternal=function(n,t){var i=this.control.viewModel.tasks.getItemById(n).description;return i==t?!1:(this.history.addAndRedo(new f.TaskDesriptionHistoryItem(this.modelManipulator,n,t)),!0)},t}(u);t.TaskDescriptionCommand=s;h=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t,i){return n.prototype.execute.call(this,t,i)},t.prototype.executeInternal=function(n,t){var i=this.control.viewModel.tasks.getItemById(n).progress;return i==t?!1:(this.history.addAndRedo(new f.TaskProgressHistoryItem(this.modelManipulator,n,t)),!0)},t}(u);t.TaskProgressCommand=h;c=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t,i){return n.prototype.execute.call(this,t,i)},t.prototype.executeInternal=function(n,t){var i=this.control.viewModel.tasks.getItemById(n).start;return i.getTime()==t.getTime()?!1:(this.history.addAndRedo(new f.TaskStartHistoryItem(this.modelManipulator,n,t)),t<this.control.dataRange.start&&(this.control.dataRange.start=t),!0)},t}(u);t.TaskStartCommand=c;l=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t,i){return n.prototype.execute.call(this,t,i)},t.prototype.executeInternal=function(n,t){var i=this.control.viewModel.tasks.getItemById(n).end;return i.getTime()==t.getTime()?!1:(this.history.addAndRedo(new f.TaskEndHistoryItem(this.modelManipulator,n,t)),t>this.control.dataRange.end&&(this.control.dataRange.end=t),!0)},t}(u);t.TaskEndCommand=l},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),o,s;Object.defineProperty(t,"__esModule",{value:!0});var f=i(5),e=i(19),u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.getState=function(){return new f.SimpleCommandState(this.isEnabled())},t}(f.CommandBase);t.DependencyCommandBase=u;o=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t,i,r){return n.prototype.execute.call(this,t,i,r)},t.prototype.executeInternal=function(n,t,i){return this.history.addAndRedo(new e.InsertDependencyHistoryItem(this.modelManipulator,n,t,i)),!0},t.prototype.isEnabled=function(){return n.prototype.isEnabled.call(this)&&this.control.settings.editing.allowDependencyAdding},t}(u);t.CreateDependencyCommand=o;s=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t){return n.prototype.execute.call(this,t)},t.prototype.executeInternal=function(n){return(n=n||this.control.taskEditController.dependencyId,n!=null)?(this.history.addAndRedo(new e.RemoveDependencyHistoryItem(this.modelManipulator,n)),!0):!1},t.prototype.isEnabled=function(){return n.prototype.isEnabled.call(this)&&this.control.settings.editing.allowDependencyDeleting},t.prototype.getState=function(){var t=n.prototype.getState.call(this);return t.visible=t.enabled&&this.control.taskEditController.dependencyId!=null,t},t}(u);t.RemoveDependencyCommand=s},function(n,t,i){"use strict";var r=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),o,s,h,c;Object.defineProperty(t,"__esModule",{value:!0});var e=i(5),u=i(20),f=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.getState=function(){return new e.SimpleCommandState(this.isEnabled())},t}(e.CommandBase);t.ResourceCommandBase=f;o=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t){return n.prototype.execute.call(this,t)},t.prototype.executeInternal=function(n){return this.history.addAndRedo(new u.CreateResourceHistoryItem(this.modelManipulator,n)),!0},t}(f);t.CreateResourceCommand=o;s=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t){return n.prototype.execute.call(this,t)},t.prototype.executeInternal=function(n){var t=this,i;return this.history.beginTransaction(),i=this.control.viewModel.assignments.items.filter(function(t){return t.resourceId==n}),i.forEach(function(n){return t.history.addAndRedo(new u.DeassignResourceHistoryItem(t.modelManipulator,n.internalId))}),this.history.addAndRedo(new u.RemoveResourceHistoryItem(this.modelManipulator,n)),this.history.endTransaction(),!0},t}(f);t.RemoveResourceCommand=s;h=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t,i){return n.prototype.execute.call(this,t,i)},t.prototype.executeInternal=function(n,t){return this.history.addAndRedo(new u.AssignResourceHistoryItem(this.modelManipulator,n,t)),!0},t}(f);t.AssignResourceCommand=h;c=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return r(t,n),t.prototype.execute=function(t){return n.prototype.execute.call(this,t)},t.prototype.executeInternal=function(n){return this.history.addAndRedo(new u.DeassignResourceHistoryItem(this.modelManipulator,n)),!0},t}(f);t.DeassignResourceCommand=c},function(n,t,i){"use strict";var e=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),f;Object.defineProperty(t,"__esModule",{value:!0});var o=i(21),r=i(30),u=i(13),s=i(20),h=i(5),c=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return e(t,n),t.prototype.applyParameters=function(n,t){var f,e,u,i;for(this.history.beginTransaction(),n.title!=t.title&&this.history.addAndRedo(new r.TaskTitleHistoryItem(this.modelManipulator,t.id,n.title)),n.progress!=t.progress&&this.history.addAndRedo(new r.TaskProgressHistoryItem(this.modelManipulator,t.id,n.progress)),n.start!=t.start&&this.history.addAndRedo(new r.TaskStartHistoryItem(this.modelManipulator,t.id,n.start)),n.end!=t.end&&this.history.addAndRedo(new r.TaskEndHistoryItem(this.modelManipulator,t.id,n.end)),i=0;i<n.assigned.length;i++)f=t.assigned.getItemById(n.assigned.getItem(i).internalId),f||this.history.addAndRedo(new s.AssignResourceHistoryItem(this.modelManipulator,n.assigned.getItem(i).internalId,t.id));for(e=function(i){var r=t.assigned.getItem(i),e=n.assigned.getItemById(r.internalId),f;e||(f=u.control.viewModel.assignments.items.find(function(n){return n.resourceId==r.internalId&&n.taskId==t.id}),u.history.addAndRedo(new s.DeassignResourceHistoryItem(u.modelManipulator,f.internalId)))},u=this,i=0;i<t.assigned.length;i++)e(i);return this.history.endTransaction(),!1},t.prototype.createParameters=function(n){n=n||this.control.viewModel.tasks.getItemById(this.control.currentSelectedTaskID);var t=new f;return t.id=n.internalId,t.title=n.title,t.progress=n.progress,t.start=n.start,t.end=n.end,t.assigned=this.control.viewModel.getAssignedResources(n),t.resources=new u.ResourceCollection,t.resources.addRange(this.control.viewModel.resources.items),t.showResourcesDialogCommand=this.control.commandManager.showResourcesDialog,t},t.prototype.isEnabled=function(){return!0},t.prototype.getState=function(){var n=new h.SimpleCommandState(this.isEnabled());return n.visible=!this.control.taskEditController.dependencyId,n},t.prototype.getDialogName=function(){return"TaskEdit"},t}(o.DialogBase);t.TaskEditDialogCommand=c;f=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return e(t,n),t.prototype.clone=function(){var n=new t;return n.id=this.id,n.title=this.title,n.progress=this.progress,n.start=this.start,n.end=this.end,n.assigned=new u.ResourceCollection,n.assigned.addRange(this.assigned.items),n.resources=new u.ResourceCollection,n.resources.addRange(this.resources.items),n.showResourcesDialogCommand=this.showResourcesDialogCommand,n},t}(o.DialogParametersBase);t.TaskEditParameters=f},function(n,t,i){"use strict";var e=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r,o,u,s,f;Object.defineProperty(t,"__esModule",{value:!0});r=i(21);o=i(19),function(n){n[n.DoNothing=0]="DoNothing";n[n.RemoveDependency=1]="RemoveDependency";n[n.KeepDependency=2]="KeepDependency"}(u=t.ConstraintViolationOption||(t.ConstraintViolationOption={}));s=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return e(t,n),t.prototype.applyParameters=function(n,t){return n.option===u.DoNothing?!1:(n.option===u.RemoveDependency&&this.history.addAndRedo(new o.RemoveDependencyHistoryItem(this.modelManipulator,t.dependencyId)),!0)},t.prototype.createParameters=function(n){var t=new f;return t.dependencyId=n,t},t.prototype.getDialogName=function(){return"ConstraintViolation"},t}(r.DialogBase);t.ConstraintViolationDialogCommand=s;f=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return e(t,n),t.prototype.clone=function(){var n=new t;return n.dependencyId=this.dependencyId,n.option=this.option,n},t}(r.DialogParametersBase);t.ConstraintViolationDialogParameters=f},function(n,t,i){"use strict";var u=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r;Object.defineProperty(t,"__esModule",{value:!0});var f=i(21),e=i(13),o=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.applyParameters=function(n,t){var i,r;for(this.history.beginTransaction(),i=0;i<n.resources.length;i++)r=t.resources.getItemById(n.resources.getItem(i).internalId),r||this.control.commandManager.createResourceCommand.execute(n.resources.getItem(i).text);for(i=0;i<t.resources.length;i++)r=n.resources.getItemById(t.resources.getItem(i).internalId),r||this.control.commandManager.removeResourceCommand.execute(t.resources.getItem(i).internalId);return this.history.endTransaction(),!1},t.prototype.createParameters=function(){var n=new r;return n.resources=new e.ResourceCollection,n.resources.addRange(this.control.viewModel.resources.items),n},t.prototype.getDialogName=function(){return"Resources"},t}(f.DialogBase);t.ResourcesDialogCommand=o;r=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return u(t,n),t.prototype.clone=function(){var n=new t;return n.resources=new e.ResourceCollection,n.resources.addRange(this.resources.items),n},t}(f.DialogParametersBase);t.ResourcesDialogParameters=r},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.CreateTask=0]="CreateTask";n[n.CreateSubTask=1]="CreateSubTask";n[n.RemoveTask=2]="RemoveTask";n[n.RemoveDependency=3]="RemoveDependency";n[n.TaskInformation=4]="TaskInformation";n[n.TaskAddContextItem=5]="TaskAddContextItem"})(i=t.GanttClientCommand||(t.GanttClientCommand={}))},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t){this.control=n;this.bars=t}return n.prototype.updateContextMenu=function(){for(var n,r,t,i=0;n=this.bars[i];i++)if(n.isContextMenu())for(n.updateItemsList(),r=n.getCommandKeys(),t=0;t<r.length;t++)this.updateBarItem(n,r[t])},n.prototype.updateItemsState=function(n){for(var i,r,f=!!n.length,u=0,t;t=this.bars[u];u++)if(t.isVisible()){var e=t.getCommandKeys(),o=function(i,r){if(f&&n.find(function(n){return n==r}))return"continue";s.updateBarItem(t,r)},s=this;for(i=0,r=void 0;r=e[i];i++)o(i,r)}},n.prototype.updateBarItem=function(n,t){var r=this.control.commandManager.getCommand(t),i;r&&(i=r.getState(),n.setItemVisible(t,i.visible),i.visible&&(n.setItemEnabled(t,i.enabled),n.setItemValue(t,i.value)))},n}();t.BarManager=i}])});